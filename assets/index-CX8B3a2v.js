import{r as t,j as e}from"./react-CywZ_8YR.js";import{R as M}from"./react-dom-Bg_DQbB-.js";import{P as x}from"./prop-types-L5NmFoeK.js";import{l as $}from"./lodash-C2nYvBw5.js";import{i as T,g as q,a as F,o as E,s as P,b as U,c as D}from"./@firebase-DreQeOHl.js";import"./firebase-CQiR9VvM.js";import{u as k,N as g,a as L,R as z,b as v,B as W}from"./react-router-C8_8tF5Z.js";import{A as R,m as S}from"./framer-motion-BK0ZBAWD.js";import"./cookie-CY119PWS.js";import"./scheduler-BNqrtbQi.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./motion-dom-DnIdl6pN.js";import"./motion-utils-BDWe_Wef.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const Z="/last-minute/assets/ket-Bp7EiJsM.png",A=n=>n*parseFloat(getComputedStyle(document.documentElement).fontSize),w={isSmallScreen:window.innerWidth<A(48),dimensions:{width:window.innerWidth,height:window.innerHeight},navBarHeight:0,setNavBarHeight:()=>{}},N=t.createContext(w),B=({children:n})=>{const[r,a]=t.useState(w.isSmallScreen),[c,s]=t.useState(w.dimensions),[i,o]=t.useState(w.navBarHeight),l=A(52),u=t.useCallback($.debounce((m,h)=>{s({width:m,height:h}),console.log("debounced")},200),[]);return t.useEffect(()=>{const m=()=>{const h=window.innerWidth,b=window.innerHeight;u(h,b),a(h<l)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[u,l]),e.jsx(N.Provider,{value:{isSmallScreen:r,dimensions:c,navBarHeight:i,setNavBarHeight:o},children:n})};B.propTypes={children:x.node.isRequired};const f=({filled:n=!1,onClick:r=()=>{},className:a,children:c})=>{const{isSmallScreen:s}=t.useContext(N),[i,o]=t.useState(!1);return e.jsx("div",{className:`${a} px-2.5 py-1 truncate transition-all ${n?"bg-primary hover:bg-filled-button-hover active:bg-filled-button-active text-secondary-text":"bg-transparent hover:bg-interactive-hover active:bg-interactive-active  text-primary"}  border-2 border-primary hover:border-filled-button-hover active:border-filled-button-active active:ring-primary active:ring text-center box-border rounded-md font-semibold text-lg cursor-pointer `,onClick:r,onPointerDown:()=>o(!0),onPointerCancel:()=>o(!1),onPointerUp:()=>o(!1),onPointerLeave:()=>o(!1),children:e.jsx("div",{className:`${s?"transition-all":"transition-transform"} ${i?"scale-[97%] opacity-75":""}`,children:c})})};f.propTypes={filled:x.bool,onClick:x.func,className:x.string,children:x.node.isRequired};const K=()=>e.jsx("div",{children:"FAQ"}),V=()=>e.jsxs("div",{className:"flex flex-col flex-1 items-center w-screen justify-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:Z,width:100,alt:"Ket"}),e.jsx("h1",{children:"Last Minute"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("p",{children:"Your courses. At your demand."}),e.jsx(f,{onClick:null,children:"I am a button"})]}),e.jsx(K,{})]}),y=({className:n="",children:r,onClick:a=()=>{}})=>{const{isSmallScreen:c}=t.useContext(N),[s,i]=t.useState(!1);return e.jsx("div",{className:`${n} px-3 py-1 w-full ${c?"transition-all":""} rounded-md hover:bg-interactive-hover
        active:bg-interactive-active active:ring-background-secondary active:ring truncate text-primary-text text-center font-medium text-lg cursor-pointer `,onClick:a,onPointerDown:()=>i(!0),onPointerCancel:()=>i(!1),onPointerUp:()=>i(!1),onPointerLeave:()=>i(!1),children:e.jsx("div",{className:`transition-transform w-min ${s?"scale-[97%]":""}`,children:r})})};y.propTypes={className:x.string,onClick:x.func,children:x.node.isRequired};const G=n=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:512,height:512,...n},t.createElement("path",{d:"M15.4,9.88,10.81,5.29a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42L14,11.29a1,1,0,0,1,0,1.42L9.4,17.29a1,1,0,0,0,1.41,1.42l4.59-4.59A3,3,0,0,0,15.4,9.88Z"})),J=n=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...n},t.createElement("path",{d:"M19,2H5C2.243,2,0,4.243,0,7v10c0,2.757,2.243,5,5,5h14c2.757,0,5-2.243,5-5V7c0-2.757-2.243-5-5-5ZM2,17V7c0-1.654,1.346-3,3-3H13V20H5c-1.654,0-3-1.346-3-3Zm20,0c0,1.654-1.346,3-3,3h-4V4h4c1.654,0,3,1.346,3,3v10Zm-2-6c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Zm0,4c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Zm0-8c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Z"})),Q={apiKey:"AIzaSyBOS586Glw04Yc02cT15X9h7q0xMCNkJGM",authDomain:"project-last-minute.firebaseapp.com",projectId:"project-last-minute",storageBucket:"project-last-minute.firebasestorage.app",messagingSenderId:"465198803740",appId:"1:465198803740:web:53c0d2690e0cc343d3e8d9",measurementId:"G-2L8JDEKDWT"},I=T(Q),j=q(I);F(I);const Y={user:void 0,signUp:async()=>Promise.resolve(),signIn:async()=>Promise.resolve(),signOut:async()=>Promise.resolve()},C=t.createContext(Y),O=({children:n})=>{const[r,a]=t.useState(void 0);t.useEffect(()=>{const l=E(j,u=>{a(u)});return()=>l()},[]);const c=async({email:l,password:u})=>{try{await D(j,l,u),await o(),console.log("Signed up successfully!")}catch(m){console.error("Error signing up:",m)}},s=async({email:l,password:u})=>{try{await U(j,l,u),await o()}catch(m){console.error("Error signing in:",m)}},i=async()=>{try{await P(j),await o()}catch(l){console.error("Error signing out:",l)}},o=()=>new Promise(l=>{const u=E(j,m=>{a(m),u(),l(m)})});return e.jsx(C.Provider,{value:{user:r,signUp:c,signIn:s,signOut:i},children:n})};O.propTypes={children:x.node.isRequired};const H=({scrollContainerRef:n={current:null}})=>{const{user:r}=t.useContext(C),[a,c]=t.useState(!1),[s,i]=t.useState(!1),{isSmallScreen:o,setNavBarHeight:l}=t.useContext(N),u=t.useRef(null),m=k(),h=async()=>{await P(j).then(()=>{console.log("Signed out successfully!"),m("/auth")}).catch(d=>{console.error("Error signing out:",d)})};t.useEffect(()=>{o&&c(!1)},[o]),t.useEffect(()=>{u.current&&l(u.current.offsetHeight)},[l]),t.useEffect(()=>{const d=()=>{i(n.current.scrollTop>0)},p=n.current;return p&&p.addEventListener("scroll",d),()=>{p&&p.removeEventListener("scroll",d)}},[n]);const b=r?[{name:"Dashboard",path:"/"},{name:"Book",path:"/booking"},{name:"History",path:"/history"},{name:"Settings",path:"/settings"}]:[{name:"Home",path:"/"},{name:"Contact",path:"/contact"},{name:"FAQ",path:"/faq"}];return e.jsxs("div",{ref:u,className:`sticky top-0 flex justify-between w-full py-4 px-6
        border-b border-transparent transition-colors  duration-300 ${s?"!border-background-secondary/30":""}`,children:[e.jsx("div",{className:"flex items-center text-2xl justify-start max-md:flex-1",children:e.jsx(g,{to:"/",className:"font-semibold text-nowrap",children:"Last Minute"})}),o?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-min aspect-square flex !p-1.5 items-center justify-center",onClick:()=>c(!a),children:e.jsx(J,{width:28,height:28})}),e.jsx(R,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(S.div,{className:"absolute top-0 left-0 w-screen h-screen bg-background-secondary/25",initial:{opacity:0},animate:{opacity:1,backdropFilter:"blur(3px)"},exit:{opacity:0},onClick:()=>c(!1)}),e.jsxs(S.div,{className:"w-72 max-w-4/5 fixed top-0 text-end flex flex-col px-6 py-4 right-0 h-screen bg-background",initial:{x:"100%",boxShadow:"0px 0px 0px 0px rgba(0, 0, 0, 0)"},animate:{x:0,boxShadow:"3px 0px 10px 2px rgba(0, 0, 0, 0.1)"},exit:{x:"100%",boxShadow:"0px 0px 0px 0px rgba(0, 0, 0, 0)"},transition:{type:"spring",stiffness:200,damping:20,mass:.5},children:[e.jsx(y,{className:"w-min aspect-square flex !p-1 items-center mb-2 justify-center ml-auto",onClick:()=>c(!1),children:e.jsx(G,{width:32,height:32})}),e.jsx(g,{to:"/auth",className:"flex",children:e.jsx(f,{filled:!0,className:"flex-1",onClick:()=>{c(!1),h()},children:r?"Sign out":"Sign in / Register"})}),e.jsx("p",{className:"text-lg font-semibold mr-3 mt-6 mb-2",children:"Navigation"}),b.map(d=>e.jsx(g,{to:d.path,className:({isActive:p})=>p?" bg-background-secondary/50 rounded-md pointer-events-none":void 0,children:e.jsx(y,{onClick:()=>c(!1),className:"py-2 flex justify-end",children:d.name})},d.name))]})]})})]}):e.jsxs("div",{className:"text-lg font-medium items-center justify-end inline-flex top-0 py-0 gap-4",children:[e.jsx("div",{className:"inline-flex gap-2",children:b.map(d=>e.jsx(g,{to:d.path,className:({isActive:p})=>p?"underline underline-offset-4 underline-primary pointer-events-none":void 0,children:e.jsx(y,{children:d.name})},d.name))}),r?e.jsx("div",{className:"flex gap-2 flex-row",children:e.jsx(f,{onClick:()=>h(),children:"Sign out"})}):e.jsxs("div",{className:"flex gap-2 flex-row",children:[e.jsx(g,{to:{pathname:"/auth"},state:{action:"register"},className:({isActive:d})=>`flex-1 flex transition-opacity ${d?"pointer-events-none opacity-50":""}`,children:e.jsx(f,{children:"Register"})}),e.jsx(g,{to:{pathname:"/auth"},state:{action:"signin"},className:({isActive:d})=>`flex-1 flex transition-opacity ${d?"pointer-events-none opacity-50":""}`,children:e.jsx(f,{filled:!0,children:"Sign in"})})]})]})]})};H.propTypes={scrollContainerRef:x.object.isRequired};const X=()=>{var l;const n=k(),r=L(),{signIn:a,signUp:c}=t.useContext(C),[s,i]=t.useState(((l=r.state)==null?void 0:l.action)||"signin"),o=async()=>{await a({email:"admin@admin.com",password:"admin123"}).then(()=>{n("/")})};return e.jsxs("div",{className:"flex flex-col flex-1 items-center justify-center",children:["auth",e.jsx(f,{onClick:()=>o(),children:"Login"})]})},_=()=>e.jsxs("div",{className:"flex flex-col flex-1 items-center justify-center",children:[e.jsx("h1",{children:"404 Page not found"}),e.jsx("p",{children:"The page you are looking for does not exist."})]}),ee=()=>e.jsx("div",{children:"dashboard"}),te=()=>e.jsx("div",{children:"booking"}),ne=()=>e.jsx("div",{children:"session"}),se=()=>e.jsx("div",{children:"settings"});function ie(){const{user:n}=t.useContext(C),r=L(),a=t.useRef(null);return t.useEffect(()=>{console.log(n)},[n]),n===void 0?e.jsx("div",{children:"Loading..."}):e.jsx(S.div,{className:"w-screen h-screen overflow-hidden flex-col flex text-primary-text",initial:{opacity:0},animate:{opacity:1,transition:{duration:1}},exit:{opacity:0},children:e.jsxs(B,{children:[e.jsx(H,{scrollContainerRef:a}),e.jsx(R,{mode:"wait",children:e.jsx(S.div,{variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.5}},exit:{opacity:0,transition:{duration:.3}}},ref:a,initial:"initial",animate:"animate",exit:"exit",className:"w-full overflow-y-auto h-screen flex",children:e.jsxs(z,{location:r,children:[e.jsx(v,{path:"/",element:n?e.jsx(ee,{}):e.jsx(V,{})}),n?e.jsxs(e.Fragment,{children:[e.jsx(v,{path:"/booking",element:e.jsx(te,{})}),e.jsx(v,{path:"/session",element:e.jsx(ne,{})}),e.jsx(v,{path:"/settings",element:e.jsx(se,{})})]}):e.jsx(v,{path:"/auth",element:e.jsx(X,{})}),e.jsx(v,{path:"*",element:e.jsx(_,{})})]},r.pathname)},r.pathname+(n?"-auth":"-guest"))})]})},n===void 0?"loading":"loaded")}M.createRoot(document.getElementById("root")).render(e.jsx(O,{children:e.jsx(W,{basename:"/last-minute/",children:e.jsx(ie,{})})}));
