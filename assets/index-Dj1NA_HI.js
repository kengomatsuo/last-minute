import{j as e,r as t}from"./react-CywZ_8YR.js";import{R as Ot}from"./react-dom-V7lzCc_E.js";import{P as o}from"./prop-types-D0pSn4ZB.js";import{u as ue,i as Ut}from"./react-i18next-BIj0jxNJ.js";import{A as de,m as $}from"./framer-motion-CR2KhNKL.js";import{i as $e}from"./i18next-Bhc83OLH.js";import{i as Zt,g as Ht,a as zt,b as jt,c as $t,d as Gt,o as Wt,h as Ge,e as fe,f as je,s as dt,E as Yt,j as Kt,u as Jt,k as ut,l as Qt,m as Xt,n as mt,p as We,q as Nt,t as Se,v as Ne,w as _t,x as ft,y as es,z as ts,A as ss,B as Oe,C as be,D as Ye,F as xe,G as kt,H as st,T as ht,I as Ue,J as gt,K as pt,L as as,M as rs,N as ns}from"./@firebase-lXm9I-Cq.js";import"./firebase-DbWP3kyk.js";import{F as Ie}from"./@lottiefiles-DYk0DEtr.js";import{u as Ee,N as Ze,L as we,a as at,R as is,b as ge,O as os,B as ls}from"./react-router-Cz7bXzTt.js";import"./cookie-BX9QSSmL.js";import"./scheduler-BNqrtbQi.js";import"./motion-dom-Dzysx818.js";import"./motion-utils-rpnQiP0J.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();const qe=({className:a="",dotsClassName:s=""})=>{const i=s||"h-2 w-2 bg-primary";return e.jsx("div",{className:`${a} flex items-center justify-center`,children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("span",{className:`${i} rounded-full animate-bounce [animation-delay:0s]`}),e.jsx("span",{className:`${i} rounded-full animate-bounce [animation-delay:0.2s]`}),e.jsx("span",{className:`${i} rounded-full animate-bounce [animation-delay:0.4s]`})]})})};qe.propTypes={className:o.string,dotsClassName:o.string};const Ct=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M15.4,9.88,10.81,5.29a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42L14,11.29a1,1,0,0,1,0,1.42L9.4,17.29a1,1,0,0,0,1.41,1.42l4.59-4.59A3,3,0,0,0,15.4,9.88Z"})),G=({filled:a=!1,onClick:s=()=>{},disabled:i=!1,className:r,children:n,loading:l=!1,type:f="button",popup:u=null})=>{const[d,m]=t.useState(!1),[h,c]=t.useState(!1),g=t.useRef(null),b=t.useRef(null);t.useEffect(()=>{const v=F=>{h&&g.current&&b.current&&!g.current.contains(F.target)&&!b.current.contains(F.target)&&c(!1)};return h&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[h]);const R=t.useCallback(async v=>{try{if(i||d)return;m(!0),await s(v)}catch(F){console.error("CustomButton click error:",F)}finally{m(!1)}},[i,d,s]);return e.jsxs("button",{ref:g,formNoValidate:!0,type:f,onClick:u?null:R,className:`${l||d?"pointer-events-none":""} ${r} ${u?"!p-0":""} ${h?"active:!ring-0":""} px-2.5 py-1 truncate transition-all ${a?"bg-primary text-filled-button-text":"bg-transparent text-hollow-button-text"} ${i?"opacity-50 !cursor-not-allowed !hover:border-primary":a?"hover:bg-filled-button-hover hover:border-filled-button-hover active:bg-filled-button-active  active:ring-primary active:ring focus-visible:!ring-background-secondary":"hover:bg-interactive-hover hover:border-filled-button-hover active:bg-interactive-active  active:ring-primary active:ring focus-visible::ring-primary"} border-2 min-w-fit border-primary text-center box-border rounded-md font-semibold text-lg cursor-pointer
       focus:outline-none focus-visible:ring-2 relative overflow-visible flex justify-center`,children:[h&&e.jsx("div",{ref:b,className:"absolute bottom-[calc(100%+0.5rem)] mb-2 self-center z-10",onClick:v=>{v.stopPropagation(),v.preventDefault()},onMouseDown:v=>v.stopPropagation(),onMouseUp:v=>v.stopPropagation(),children:u}),e.jsx("div",{className:`${i?"pointer-events-none":""} ${l||d?"opacity-0":""} ${u?"p-2 hover:bg-interactive-hover active:bg-interactive-active !transition-all rounded-l-md":"active:opacity-75"} transition-transform active:scale-[97%]  flex gap-2 justify-center items-center`,onClick:u&&R,children:n}),u&&e.jsx("div",{className:`${l||d?"opacity-0":""} border-l-[1.5px] border-l-primary/40 h-full`,children:e.jsx("div",{className:`${l||d?"opacity-0":""} hover:bg-interactive-hover active:bg-interactive-active active:scale-[97%] transition-all rounded-r-md flex items-center justify-center h-full`,onClick:()=>c(!h),children:e.jsx(Ct,{className:`${a?"fill-background":"fill-primary"} ${h?"-rotate-90":"rotate-90"} w-4 h-4`})})}),(l||d)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(qe,{dotsClassName:a?"h-2 w-2 bg-background":"h-2 w-2 bg-primary"})})]})};G.propTypes={filled:o.bool,onClick:o.func,disabled:o.bool,className:o.string,children:o.node.isRequired,type:o.string,loading:o.bool,popup:o.node};const pe=({className:a,header:s,footer:i,scrolling:r=!1,onClick:n,children:l})=>e.jsxs("div",{className:`${a} ${n?"transition-all cursor-pointer hover:scale-101 hover:caret-card-outline-hover active:ring active:ring-primary active:caret-card-outline-active active:scale-100":""} bg-card-background box-border border-card-outline border-2 backdrop-blur-sm flex p-4 flex-col rounded-xl`,onClick:n,children:[e.jsx("div",{className:"text-2xl font-bold pb-2",children:s}),e.jsx("div",{className:`${r?"overflow-y-scroll scrollbar-hidden":""} flex-1`,children:l}),e.jsx("div",{children:i})]});pe.propTypes={className:o.string,header:o.string,scrolling:o.bool,onClick:o.func,children:o.node.isRequired,footer:o.node};const cs=()=>e.jsx("footer",{children:"This is a footer. Edit me in src/components/CustomFooter.jsx"}),ie=({className:a="",children:s,onClick:i=()=>{},loading:r=!1})=>{const[n,l]=t.useState(!1),f=t.useCallback(async()=>{try{l(!0),await i()}catch(u){console.error("CustomInteractive click error:",u)}finally{l(!1)}},[i]);return e.jsxs("div",{className:`${r||n?"pointer-events-none":""} ${n?"opacity-50":""} ${a} px-3 py-1 w-full rounded-md hover:bg-interactive-hover
        active:bg-interactive-active active:scale-[97%] active:ring-background-secondary active:ring text-ellipsis relative text-primary-text text-center font-medium text-lg cursor-pointer`,onClick:f,children:[e.jsx("div",{className:`${r||n?"invisible":""} transition-transform justify-center flex w-full`,children:s}),(r||n)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(qe,{dotsClassName:"h-2 w-2 bg-primary"})})]})};ie.propTypes={className:o.string,onClick:o.func,children:o.node.isRequired};const St=a=>a*parseFloat(getComputedStyle(document.documentElement).fontSize),Me=(a,s)=>{t.useEffect(()=>{s===void 0?console.log(`${a}: %c${s}`,"color: navy; font-weight: bold;"):s===null?console.log(`${a}: %c${s}`,"color: red; font-weight: bold;"):console.log(a,s)},[a,s])},Ke=(a,s,i=null)=>{const r=t.useRef(null),n=t.useRef(a);t.useEffect(()=>{n.current=a},[a]);const l=t.useCallback((...f)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n.current(...f)},s)},[s]);return t.useEffect(()=>{i!==null&&n.current()},i??[]),l},ds=(a,s)=>{const i=localStorage.getItem(a);if(i!==null)try{return JSON.parse(i)}catch(r){console.error(`Error parsing localStorage item ${a}:`,r)}return s instanceof Function?s():s},Ae=(a,s)=>{const[i,r]=t.useState(()=>ds(a,s));return t.useEffect(()=>{localStorage.setItem(a,JSON.stringify(i))},[a,i]),[i,r]},Be="4.5rem",re={type:"spring",stiffness:170,damping:26,mass:1,restDelta:.001,velocity:.5},At=({title:a,message:s,onOkay:i,onCancel:r,onClose:n,okayButton:l,cancelButton:f,closeButton:u,detailsButton:d,primary:m})=>{const{t:h}=ue(),{popAlertHead:c}=t.useContext(le),g=()=>{r&&r(),b()},b=()=>{n&&n(),c()},R=()=>{i&&i(),b()};return!l&&!f&&!u&&!d&&(l=!0),console.log(i,r,n,l,f,u,d),e.jsx(de,{children:(s||a)&&e.jsxs("div",{className:"fixed top-0 left-0 w-screen h-screen flex items-center justify-center z-30",children:[e.jsx($.div,{className:"absolute top-0 left-0 inset-0 bg-background-secondary/30 z-30",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:re}),e.jsxs($.div,{className:"bg-alert-background backdrop-blur-[4px] flex flex-col text-center rounded-lg z-40 min-w-3xs max-w-2xs min-h-32 overflow-clip",initial:{opacity:0,scale:1.3},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.15}},transition:re,children:[e.jsxs("div",{className:"flex flex-col flex-1 px-4 py-2 gap-0 items-center justify-center text-primary-text",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a||h("alert.alert")}),e.jsx("p",{className:"text-sm flex items-center justify-center",children:s||h("alert.defaultMessage",{defaultValue:"Oi set the message prop"})})]}),e.jsxs("div",{className:"flex justify-center divide-neutral-200 divide-x border-t border-primary-text/15",children:[u&&e.jsx("div",{className:`$${m==="close"?"font-bold":""} px-4 py-2 text-blue-500 flex-1 cursor-pointer active:bg-neutral-400/10 transition-all`,onClick:b,children:h("alert.close")}),f&&e.jsx("div",{className:`$${m==="cancel"?"font-bold":""} px-4 py-2 text-red-500 flex-1 cursor-pointer active:bg-neutral-400/10 transition-all`,onClick:g,children:h("alert.cancel")}),d&&e.jsx("div",{className:`$${m==="details"?"font-bold":""} px-4 py-2 text-blue-500 flex-1 cursor-pointer active:bg-neutral-400/10 transition-all`,onClick:R,children:h("alert.details")}),l&&e.jsx("div",{className:`$${m==="okay"?"font-bold":""} px-4 py-2 text-blue-500 flex-1 cursor-pointer active:bg-neutral-400/10 transition-all`,onClick:R,children:h("alert.okay")})]})]})]})})};At.propTypes={title:o.string,message:o.string,onOkay:o.func,onCancel:o.func,onClose:o.func,okayButton:o.bool,cancelButton:o.bool,closeButton:o.bool,detailsButton:o.bool,primary:o.oneOf(["okay","cancel","close","details"])};const us="Last Minute",ms="English",fs={signIn:"Sign In",signUp:"Sign Up",signOut:"Sign Out",change:"Change",deactivate:"Deactivate",delete:"Delete",cancel:"Cancel",confirm:"Confirm",accept:"Accept",book:"Book",instantBooking:"Instant Booking",scheduleBooking:"Schedule Booking",topUp:"Top Up Balance"},hs={email:"Email",password:"Password",retypePassword:"Re-Type Password",name:"Name",firstName:"First Name",lastName:"Last Name",dob:"Date of Birth",details:"Details",subject:"Subject",topic:"Topic",timezone:"Timezone",language:"Language",theme:"Theme",appVersion:"App Version",currentBalance:"Current Balance",availableFunds:"Available funds",amount:"Amount"},gs={email:"Email",password:"Password",name:"Name",firstName:"First Name",lastName:"Last Name",dob:"Enter Date of Birth",details:"I need help with this particular question...",subject:"Select a subject",topic:"Topics, keywords, etc.",timezone:"Select timezone",language:"Select language",amount:"Enter amount",retypePassword:"Re-type Password"},ps={alreadyMember:"Already a member?",dontHaveAccount:"Don't have an account?",secureGrades:"Secure your grades with <1>Last Minute</1>",verifyEmailSent:"A verification email has been sent to {{email}}.",verifyEmailInstruction:"Please verify your email address to continue.",errorSigningUp:"Error signing up",errorSigningIn:"Error signing in"},xs={myCourses:"My Courses",welcomeTutor:"Welcome, Tutor!",visitRequests:"Please visit the",requestsPage:"Requests Page",pendingSessions:"to see pending sessions."},ws={general:"General",editProfile:"Edit Profile",account:"Account",payment:"Payment",signOut:"Sign Out",deactivateAccount:"Deactivate Account",deactivateAccountDesc:"Temporary disable your account",deleteAccount:"Delete Account",deleteAccountDesc:"Permanently delete your account and all its data"},ys={instantBooking:"Instant Booking",scheduleBooking:"Schedule Booking",dateTime:"Date and Time",dateFuture:"Date and time must be in the future",dateWithin14:"Date and time must be within the next 14 days"},bs={header:"Chat",loading:"Loading messages...",noMessages:"No messages yet. Start the conversation!"},vs={alert:"Alert",close:"Close",cancel:"Cancel",details:"Details",okay:"Okay"},js={loading:"Loading...",offline:"You are offline"},Ns={header:"Frequently Asked Questions"},ks={yourCourses:"Your courses. At your demand."},Cs={header:"Requests",noDescription:"No description",noRequests:"No requests available.",orderedAt:"Ordered at: {{date}}"},Ss={nameMin:"Name must be at least 3 characters",password8:"At least 8 characters",passwordUpper:"At least 1 uppercase letter",passwordLower:"At least 1 lowercase letter",passwordNumber:"At least 1 number",passwordSpecial:"At least 1 special character"},As={completedAt:"Completed at: {{date}}",noHistory:"No session history."},Es={dashboard:"Dashboard",requests:"Requests",booking:"Booking",history:"History",home:"Home",contact:"Contact",faq:"FAQ",signOut:"Sign out",signInRegister:"Sign in / Register",navigation:"Navigation",settings:"Settings",profile:"Profile",balance:"Balance",signUp:"Sign Up"},Ts={math:"Mathematics",science:"Science",english:"English",history:"History",computerScience:"Computer Science",art:"Art",music:"Music",physicalEducation:"Physical Education",other:"Other"},Rs={weeklyGoal:"Weekly Goal",completed:"You've completed {{completed}} of {{goal}} sessions this week.",setGoal:"Set Goal:"},Ps={header:"Re-book a Recent Topic",rebookButton:"Re-book"},Ds={header:"Upcoming Sessions",today:"Today",tomorrow:"Tomorrow",noSessions:"No sessions scheduled."},Is={appName:us,thisLanguage:ms,button:fs,label:hs,placeholder:gs,auth:ps,dashboard:xs,settings:ws,booking:ys,chat:bs,alert:vs,mainLoading:js,faq:Ns,landing:ks,requests:Cs,errors:Ss,history:As,navbar:Es,subject:Ts,progressTracker:Rs,quickRebook:Ps,upcomingSchedule:Ds},Ls="Last Minute",qs="Bahasa Indonesia",Ms={signIn:"Masuk",signUp:"Daftar",signOut:"Keluar",change:"Ubah",deactivate:"Nonaktifkan",delete:"Hapus",cancel:"Batal",confirm:"Konfirmasi",accept:"Terima",book:"Pesan",instantBooking:"Pesan Instan",scheduleBooking:"Jadwalkan Pesanan",topUp:"Isi Saldo"},Bs={email:"Email",password:"Kata Sandi",retypePassword:"Ketik Ulang Kata Sandi",name:"Nama",firstName:"Nama Depan",lastName:"Nama Belakang",dob:"Tanggal Lahir",details:"Detail",subject:"Mata Pelajaran",topic:"Topik",timezone:"Zona Waktu",language:"Bahasa",indonesian:"Bahasa Indonesia",theme:"Tema",appVersion:"Versi Aplikasi",currentBalance:"Saldo Saat Ini",availableFunds:"Dana tersedia",amount:"Jumlah"},Vs={email:"Email",password:"Kata Sandi",name:"Nama",firstName:"Nama Depan",lastName:"Nama Belakang",dob:"Masukkan Tanggal Lahir",details:"Saya butuh bantuan dengan pertanyaan ini...",subject:"Pilih mata pelajaran",topic:"Topik, kata kunci, dll.",timezone:"Pilih zona waktu",language:"Pilih bahasa",amount:"Masukkan jumlah",retypePassword:"Ketik ulang kata sandi"},Fs={alreadyMember:"Sudah punya akun?",dontHaveAccount:"Belum punya akun?",secureGrades:"Amankan nilaimu dengan <1>Last Minute</1>",verifyEmailSent:"Email verifikasi telah dikirim ke {{email}}.",verifyEmailInstruction:"Silakan verifikasi email Anda untuk melanjutkan.",errorSigningUp:"Gagal mendaftar",errorSigningIn:"Gagal masuk"},Os={myCourses:"Kursus Saya",welcomeTutor:"Selamat datang, Tutor!",visitRequests:"Silakan kunjungi",requestsPage:"Halaman Permintaan",pendingSessions:"untuk melihat sesi yang menunggu."},Us={general:"Umum",editProfile:"Ubah Profil",account:"Akun",payment:"Pembayaran",signOut:"Keluar",deactivateAccount:"Nonaktifkan Akun",deactivateAccountDesc:"Nonaktifkan akun Anda sementara",deleteAccount:"Hapus Akun",deleteAccountDesc:"Hapus akun dan semua data secara permanen"},Zs={instantBooking:"Pesan Instan",scheduleBooking:"Jadwalkan Pesanan",dateTime:"Tanggal dan Waktu",dateFuture:"Tanggal dan waktu harus di masa depan",dateWithin14:"Tanggal dan waktu harus dalam 14 hari ke depan"},Hs={header:"Obrolan",loading:"Memuat pesan...",noMessages:"Belum ada pesan. Mulai percakapan!"},zs={alert:"Peringatan",close:"Tutup",cancel:"Batal",details:"Detail",okay:"Oke"},$s={loading:"Memuat...",offline:"Anda sedang offline"},Gs={header:"Pertanyaan yang Sering Diajukan"},Ws={yourCourses:"Kursus Anda. Sesuai permintaan."},Ys={header:"Permintaan",noDescription:"Tidak ada deskripsi",noRequests:"Tidak ada permintaan saat ini.",orderedAt:"Dipesan pada: {{date}}"},Ks={nameMin:"Nama minimal 3 karakter",password8:"Minimal 8 karakter",passwordUpper:"Minimal 1 huruf kapital",passwordLower:"Minimal 1 huruf kecil",passwordNumber:"Minimal 1 angka",passwordSpecial:"Minimal 1 karakter khusus"},Js={completedAt:"Selesai pada: {{date}}",noHistory:"Tidak ada riwayat sesi."},Qs={dashboard:"Dasbor",requests:"Permintaan",booking:"Pemesanan",history:"Riwayat",home:"Beranda",contact:"Kontak",faq:"FAQ",signOut:"Keluar",signInRegister:"Masuk / Daftar",navigation:"Navigasi",settings:"Pengaturan",profile:"Profil",balance:"Saldo",signUp:"Daftar"},Xs={math:"Matematika",science:"Ilmu Pengetahuan Alam",english:"Bahasa Inggris",history:"Sejarah",computerScience:"Ilmu Komputer",art:"Seni",music:"Musik",physicalEducation:"Pendidikan Jasmani",other:"Lainnya"},_s={weeklyGoal:"Target Mingguan",completed:"Anda telah menyelesaikan {{completed}} dari {{goal}} sesi minggu ini.",setGoal:"Atur Target:"},ea={header:"Pesan Ulang Topik Terbaru",rebookButton:"Pesan Ulang"},ta={header:"Sesi Mendatang",today:"Hari Ini",tomorrow:"Besok",noSessions:"Tidak ada sesi terjadwal."},sa={appName:Ls,thisLanguage:qs,button:Ms,label:Bs,placeholder:Vs,auth:Fs,dashboard:Os,settings:Us,booking:Zs,chat:Hs,alert:zs,mainLoading:$s,faq:Gs,landing:Ws,requests:Ys,errors:Ks,history:Js,navbar:Qs,subject:Xs,progressTracker:_s,quickRebook:ea,upcomingSchedule:ta};$e.use(Ut).init({resources:{en:{translation:Is},id:{translation:sa}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const Et=52,Pe={isSmallScreen:window.innerWidth<St(Et),dimensions:{width:window.innerWidth,height:window.innerHeight},isOnline:navigator.onLine},le=t.createContext(Pe),Tt=({children:a})=>{const[s,i]=t.useState(Pe.isSmallScreen),[r,n]=t.useState(Pe.dimensions),l=Ke(({width:L,height:y})=>n({width:L,height:y}),300),[f,u]=t.useState(Pe.isOnline),d=St(Et),[m,h]=t.useState([]);Me("alertQueue",m);const c=(L={type:"",title:"",message:"",onOkay:()=>{},onCancel:()=>{},onClose:()=>{}})=>{const y={id:Date.now(),...L};return h(S=>[...S,y]),y.id},g=L=>{h(y=>y.filter(S=>S.id!==L))},b=()=>{h(L=>L.slice(1))},R=()=>{h([])},[v,F]=Ae("theme","default"),[P,j]=Ae("language","en");t.useEffect(()=>{$e.language!==P&&$e.changeLanguage(P)},[P]),t.useEffect(()=>{try{console.log("Setting theme:",v),v==="default"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",v)}catch(L){console.error("Failed to set theme:",L)}},[v]),t.useEffect(()=>{var I;const L=()=>{const x=window.innerWidth,H=window.innerHeight;l({width:x,height:H}),i(x<d)},y=()=>u(!0),S=()=>u(!1);return window.addEventListener("resize",L),window.addEventListener("online",y),(I=navigator.connection)==null||I.addEventListener("change",()=>{u(navigator.onLine)}),()=>{window.removeEventListener("resize",L),window.removeEventListener("online",y),window.removeEventListener("offline",S)}},[d,l]);const D=()=>{const L=window.innerWidth;i(L<d)};return e.jsxs(le.Provider,{value:{isSmallScreen:s,refreshIsSmallScreen:D,dimensions:r,isOnline:f,addAlert:c,removeAlert:g,popAlertHead:b,clearAlerts:R,selectedTheme:v,setSelectedTheme:F,language:P,setLanguage:j},children:[a,e.jsx(At,{...m[0]})]})};Tt.propTypes={children:o.node.isRequired};const aa=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M19,2H5C2.243,2,0,4.243,0,7v10c0,2.757,2.243,5,5,5h14c2.757,0,5-2.243,5-5V7c0-2.757-2.243-5-5-5ZM2,17V7c0-1.654,1.346-3,3-3H13V20H5c-1.654,0-3-1.346-3-3Zm20,0c0,1.654-1.346,3-3,3h-4V4h4c1.654,0,3,1.346,3,3v10Zm-2-6c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Zm0,4c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Zm0-8c0,.553-.448,1-1,1h-1c-.552,0-1-.447-1-1s.448-1,1-1h1c.552,0,1,.447,1,1Z"})),De=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",...a},t.createElement("path",{d:"M12.006,12.309c3.611-.021,5.555-1.971,5.622-5.671-.062-3.56-2.111-5.614-5.634-5.637-3.561,.022-5.622,2.17-5.622,5.637,0,3.571,2.062,5.651,5.634,5.672Zm-.012-9.309c2.437,.016,3.591,1.183,3.634,3.636-.047,2.559-1.133,3.657-3.622,3.672-2.495-.015-3.582-1.108-3.634-3.654,.05-2.511,1.171-3.639,3.622-3.654Z"}),t.createElement("path",{d:"M11.994,13.661c-5.328,.034-8.195,2.911-8.291,8.322-.01,.552,.43,1.008,.982,1.018,.516-.019,1.007-.43,1.018-.982,.076-4.311,2.08-6.331,6.291-6.357,4.168,.027,6.23,2.106,6.304,6.356,.01,.546,.456,.983,1,.983h.018c.552-.01,.992-.465,.983-1.017-.092-5.333-3.036-8.288-8.304-8.322Z"})),He=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M16.5,0c-4.206,0-7.5,1.977-7.5,4.5v2.587c-.484-.057-.985-.087-1.5-.087C3.294,7,0,8.977,0,11.5v8c0,2.523,3.294,4.5,7.5,4.5,3.416,0,6.231-1.304,7.167-3.146,.597,.087,1.207,.146,1.833,.146,4.206,0,7.5-1.977,7.5-4.5V4.5c0-2.523-3.294-4.5-7.5-4.5Zm0,2c3.148,0,5.5,1.32,5.5,2.5s-2.352,2.5-5.5,2.5-5.5-1.32-5.5-2.5,2.352-2.5,5.5-2.5ZM7.5,9c3.148,0,5.5,1.32,5.5,2.5s-2.352,2.5-5.5,2.5-5.5-1.32-5.5-2.5,2.352-2.5,5.5-2.5ZM2,14.582c1.36,.875,3.303,1.418,5.5,1.418s4.14-.543,5.5-1.418v.918c0,1.18-2.352,2.5-5.5,2.5s-5.5-1.32-5.5-2.5v-.918Zm5.5,7.418c-3.148,0-5.5-1.32-5.5-2.5v-.918c1.36,.875,3.303,1.418,5.5,1.418s4.14-.543,5.5-1.418v.918c0,1.18-2.352,2.5-5.5,2.5Zm9-3c-.514,0-1.012-.047-1.5-.116v-1.98c.492,.058,.99,.096,1.5,.096,2.197,0,4.14-.543,5.5-1.418v.918c0,1.18-2.352,2.5-5.5,2.5Zm0-4c-.514,0-1.012-.047-1.5-.116v-1.98c.492,.058,.99,.096,1.5,.096,2.197,0,4.14-.543,5.5-1.418v.918c0,1.18-2.352,2.5-5.5,2.5Zm0-4c-.542,0-1.066-.051-1.578-.127-.198-.887-.809-1.684-1.721-2.321,.992,.285,2.106,.449,3.299,.449,2.197,0,4.14-.543,5.5-1.418v.918c0,1.18-2.352,2.5-5.5,2.5Z"})),xt=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14Z"}),t.createElement("path",{d:"M21.294,13.9l-.444-.256a9.1,9.1,0,0,0,0-3.29l.444-.256a3,3,0,1,0-3-5.2l-.445.257A8.977,8.977,0,0,0,15,3.513V3A3,3,0,0,0,9,3v.513A8.977,8.977,0,0,0,6.152,5.159L5.705,4.9a3,3,0,0,0-3,5.2l.444.256a9.1,9.1,0,0,0,0,3.29l-.444.256a3,3,0,1,0,3,5.2l.445-.257A8.977,8.977,0,0,0,9,20.487V21a3,3,0,0,0,6,0v-.513a8.977,8.977,0,0,0,2.848-1.646l.447.258a3,3,0,0,0,3-5.2Zm-2.548-3.776a7.048,7.048,0,0,1,0,3.75,1,1,0,0,0,.464,1.133l1.084.626a1,1,0,0,1-1,1.733l-1.086-.628a1,1,0,0,0-1.215.165,6.984,6.984,0,0,1-3.243,1.875,1,1,0,0,0-.751.969V21a1,1,0,0,1-2,0V19.748a1,1,0,0,0-.751-.969A6.984,6.984,0,0,1,7.006,16.9a1,1,0,0,0-1.215-.165l-1.084.627a1,1,0,1,1-1-1.732l1.084-.626a1,1,0,0,0,.464-1.133,7.048,7.048,0,0,1,0-3.75A1,1,0,0,0,4.79,8.992L3.706,8.366a1,1,0,0,1,1-1.733l1.086.628A1,1,0,0,0,7.006,7.1a6.984,6.984,0,0,1,3.243-1.875A1,1,0,0,0,11,4.252V3a1,1,0,0,1,2,0V4.252a1,1,0,0,0,.751.969A6.984,6.984,0,0,1,16.994,7.1a1,1,0,0,0,1.215.165l1.084-.627a1,1,0,1,1,1,1.732l-1.084.626A1,1,0,0,0,18.746,10.125Z"})),ra={apiKey:"AIzaSyBOS586Glw04Yc02cT15X9h7q0xMCNkJGM",authDomain:"project-last-minute.firebaseapp.com",projectId:"project-last-minute",storageBucket:"project-last-minute.firebasestorage.app",messagingSenderId:"465198803740",appId:"1:465198803740:web:53c0d2690e0cc343d3e8d9",measurementId:"G-2L8JDEKDWT"},Te=Zt(ra),V=Ht(Te),ae=zt(Te);jt(Te);const Je=$t(Te);Gt(Te);const ve=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M18,12h0a2,2,0,0,0-.59-1.4l-4.29-4.3a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42L15,11H5a1,1,0,0,0,0,2H15l-3.29,3.29a1,1,0,0,0,1.41,1.42l4.29-4.3A2,2,0,0,0,18,12Z"})),wt=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M18,3H6C2.691,3,0,5.691,0,9v9c0,1.654,1.346,3,3,3H21c1.654,0,3-1.346,3-3V9c0-3.309-2.691-6-6-6ZM2,18V9c0-2.206,1.794-4,4-4s4,1.794,4,4v9c0,.552-.449,1-1,1H3c-.551,0-1-.448-1-1Zm20,0c0,.552-.448,1-1,1H11.828c.111-.313,.172-.649,.172-1V9c0-1.535-.58-2.938-1.532-4h7.532c2.206,0,4,1.794,4,4v9Zm-2-8v2c0,.552-.447,1-1,1s-1-.448-1-1v-1h-3c-.553,0-1-.448-1-1s.447-1,1-1h4c.553,0,1,.448,1,1Zm-12,0c0,.552-.448,1-1,1h-2c-.552,0-1-.448-1-1s.448-1,1-1h2c.552,0,1,.448,1,1Z"})),na=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",...a},t.createElement("path",{d:"m23.5,6.6c-.222-.507-.81-.736-1.317-.516-.506.221-.737.811-.516,1.317.221.505.333,1.043.333,1.6v8c0,1.103-.897,2-2,2h-8.556c.345-.591.556-1.268.556-2v-8c0-1.538-.586-2.937-1.54-4h3.54c.552,0,1-.448,1-1s-.448-1-1-1H6C2.691,3,0,5.691,0,9v8c0,2.206,1.794,4,4,4h16c2.206,0,4-1.794,4-4v-8c0-.834-.168-1.642-.5-2.4ZM4,19c-1.103,0-2-.897-2-2v-8c0-2.206,1.794-4,4-4s4,1.794,4,4v8c0,1.103-.897,2-2,2h-4Zm4-9c0,.552-.448,1-1,1h-2c-.552,0-1-.448-1-1s.448-1,1-1h2c.552,0,1,.448,1,1Zm9-1v-5c0-.552.448-1,1-1h2c.552,0,1,.448,1,1s-.448,1-1,1h-1v4c0,.552-.448,1-1,1s-1-.448-1-1Z"})),ze=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Outline",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M19,8.424V7A7,7,0,0,0,5,7V8.424A5,5,0,0,0,2,13v6a5.006,5.006,0,0,0,5,5H17a5.006,5.006,0,0,0,5-5V13A5,5,0,0,0,19,8.424ZM7,7A5,5,0,0,1,17,7V8H7ZM20,19a3,3,0,0,1-3,3H7a3,3,0,0,1-3-3V13a3,3,0,0,1,3-3H17a3,3,0,0,1,3,3Z"}),t.createElement("path",{d:"M12,14a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V15A1,1,0,0,0,12,14Z"})),yt=a=>t.createElement("svg",{width:472.5,height:750,viewBox:"0 0 504 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.4974 0C51.8462 4.71799 51.3532 9.9142 52.2991 15.1851L59.3648 54.5561C62.2915 70.8641 77.8843 81.7118 94.1923 78.7851L428.846 18.7268C439.54 16.8076 447.886 9.44212 451.539 0H53.4974Z",fill:"#BFBBA9"}),t.createElement("path",{opacity:.6,fillRule:"evenodd",clipRule:"evenodd",d:"M99.7246 800L139.723 0H474C490.569 0 504 13.4315 504 30V724.484L501.078 782.931C496.248 793.027 485.938 800 474 800H99.7246Z",fill:"#BFBBA9"}),t.createElement("path",{opacity:.8,fillRule:"evenodd",clipRule:"evenodd",d:"M504 143.415V770C504 786.569 490.569 800 474 800H46.945L13.5796 776.651C0.00472158 767.152 -3.29899 748.446 6.20052 734.872L430.476 128.579C439.976 115.005 458.681 111.701 472.256 121.2L504 143.415Z",fill:"#BFBBA9"})),Qe="data:application/octet-stream;base64,UEsDBBQAAAAIAEUUx1qETXtufgAAALgAAAANAAAAbWFuaWZlc3QuanNvbo1OSw6CMBC9Cpk1YFs0xq7wAJ7AuGjsRGtKx7SjiSHc3WEBa3bvm/dG+GIugRJY0FDDAxNmx5SF9544EnPA3YqaV+l1a1olWffh57ZgCoNjGSlgryMEL53zolVNpY/7k+mUUt3BzCd8yHifPbC6hnd0vwt5lFKiPLgI0236A1BLAwQUAAAACABFFMdaBoKp3usNAADsawAAKQAAAGFuaW1hdGlvbnMvQW5pbWF0aW9uIC0gMTc0OTIzMDAwMzUyMS5qc29u7Z3fctu4FcZfxaNrikMCBP/4bre73Zt20s529saTyXgTZe1GsV3JbrvN5Kov075G+2L9fQekLMqU4rixYnk4mVgiAQI4OMCH8+eT9GHy18nxJKRF6ibJ5O1icuxCMjm/mhxnyeSSF++Syd+4W3N9xmvG68V7nvnd5emb2eLVL//953/+faE/i/O/3Mxo5M2bN5PjPJmcLpez6+Xk+ORlMpmf/jpb6P2HWEwj5xex2vWvk+OibfP3N8vZ6c3Ri5vr+fnFbEljS0ZEpXc8+2FyqT+n9vQ7bmso53/nTf4xmVBvrawryShBiLWSk9xXaVEkZZO6vEkyBqeajorUWa9YpFlVJnlaV7fV1JMNZa09htH+byuVH9UYg6XG8uz0CkEkuASd/LJAqPNru2EzQB0rWJ6pQF100q66oCb1T1xaFY7xlK58mZxMeVNXCS9ZWb+kZ/o7OZm6NC+d7rraU0uVap5p66DrE+5ldZFMs9QX1hCPeCRMQ5mrzuvJ8fXiZoYI3byYav5wen12lDPG9xdcffPdt98f/TR7fX25OPpRIh5Nj35YXN5cUeEMqd6ezpc00Qr9ds5t2l2ftizRv7ydsoJutmg3ROUyLTaO357P58Pj+GFxenV2/pqRqM7gQK41+xvrYU3N29cCY/3kCmgr+G2LsdwuY6VGTdObD2lilv3BrM2LzcifFqcXy7eXi/eTjwzBbpkqbJYukJbd9drkWi2wgbnb1J2kuUWBXKiwZNly/TM9sK82djKNr+/k31zO5+ezxdG389OL14+9oYvUl1XCwk93bujcJbV7Elt5WqQ1wJqzPZuCPZilDkjiqnRcVdytE5dmQVtYG73I2dJZ2jRVvJEXDTfqNNgOztKactW3tiRh9xc0KJIibVyxgoisbS4NQZ2BA3Xjk2mZZrH1Jq2LWs1FnIm9rzqPfVvXVjtLi4qpB0s3uqYkD8BMkZZ5eYs91HdRmFCw306Ygjyn+5wjyOuGcKmkBihdVSEOqMoFdGi3US80mfugIdVZrWuf5nWT+Dr1JhDihjIpaMcErJFHV0WmhxGzSLxPi9DsE+zQQB3A2CYvBbV1yBHg62OfFmBWa3bK0A1nRL8HoJ/vo99Ps4vrxWwv4Bc828AnedDJX++2ZxyLr2EXPQ17JuJEXIGeBbgJXh2CsHXLFveasgQZEDTCngcWsjTLVaoNDmzladUYalBZhaEOt8jXNRuwo6jgnWqukBJgUF+ClIxWGhC4yCM65402r7crwa8vucw6/FTH6ldordY6sGOkTVEy45VBnQwtLE4Oq6LFqYxLl4IFsVnBLlapa4E1BHCR61q10bIr6LQyxBd+yRQEe61Ppg85E0zEjGNFHe7VlNOJwdLjTOOIZYx6eQLotrbgR2x7OLbRyTq2sXquZ0ffLS7PeXlcbHMhdRgXoWKBVbugrcQqkZ3j2SJPBtnoCGNHkOFTFwAQuwcKdGZdhtEq88uZKWIQBShh+2hD9Suvt4CxVXbA1UGNZ8tzjqeZgUfApBNYFI2gg2YoMATqFwif2KlWuE+08BlrDpO3Rn5ha/UkbKHbNTSCxcPBgvK+G7i4Wj4ySsjS1wmMg4ChsAsmHC4EvgWmUhluTaWviRTswGAgUPp1B0qimK/TmizxukOQjVLb3yE6Wet2Tu+hzUcHCnGoquiN8naFLNg5WZ4UDbaGddm/nDKlVZ4nrkyrGEyK11PX4MRGu0wPTJlzzCSZKJsV2hs48bXBmvw8jJsiPjDiUm/RjtD0cGgq+9D0zWJxTtj6X/hpjO/84rFRirM3I87osNXxNHagFDuhxJMjnhGC7dCvjlLgU4OvxY707ZYmJF5jcth+JcAS3TRXdVZLKY8gujwlKENwqYnwgFdW+BXqdIAFAiDptNIJHH0fRy1rBttIj9GHk2vRdcHcmGnDuILG5TrfSw5lg+O0Zhqxlb0XvvhStfSGeDdo57oQlm/kVtat9TSlRkHESQGmGHBSE3iAerKJYgUA1yJOFlTissD0bK/3CVkOT5a/zqy6nEPtgYCl5M9DAOuQgNT2VdXuq2cKpGDg4wNp1QfSF4sZaph/EZ9QlSNC6QalClcr+jOhw5P8ZTevscR7NrSVZCpB0pNJdkX9V/mr7IrSV9mECsjCWAWFUtyM1ynWksT6wr0wMepFrcd+9AAr0oTsFtVgBkPQ6pISNy7feTZUqctAJlxA9zQM2F62QbG5mLRYR/fOHCXrSthNJ0Iv0NfhNGeETGGCZBYeo7riXzUoYpCrNJ0dJLqIdZWUqPZrIuaNhf7ymmOHF0d25Qkg2/qqeKbAthcLsR4CttnRD6c3r88OAtceFdY+G9VCSfi9EdOiUnh4F6rVZOxyljGWwlNANcAHAxDPC4pFxCJDptKM2B50RdaFgMHAzyzKPiauI5xqyb/NLH5H60qFKuRkqEbeVxiHMw+qKYqHWatZwZoaQa63SEaQezjINX2Q++PNzFhbj+DylgUpfFwS3CdPvnsHABgZaLveasVm86TmgFOg7xF2/x18NuQ0eCQqFjSmDjoNOWNJhM0WNbMr6q2Q04BTw+paXdlBFSF9W8dNjKBxbGek9kS7MMYWfhPlU2de9oYRFcggKsnpmAhBCMgqtheuuMDZQn6BPIHD08ES6HAHXPFMG35PJu/ZVWQ+ARYoT7l5r1idNOoDyUPhUFFC2cChB5gIPLXIs1prOgA+IRDIQURQaQq7BM+U6JDbba3tkIe5dsieg6SW8iUCUDRVwtaPdt6gOPYmaUdrzrhXPAIxcwsoFuQBCShOC49jWvXlWT8td6mcJGxb4nw9qHZq6K+vo+odoQIW1T3Uf0CzNaR9EXgyRwzGG3eJp2rEKzFFu9WtYi2xDWm0dunYhIo2fSH7HyJQaR6CLH8cADJftgu2rOQMQFBIzVnnNY0ZJUBcvhNP/CiYJIGt9TC9tzudM1EAP6B2NvsVhVHrrTn2HGZoUNewEHBTxRayxaq8rBIvcj8EXVrbnthcNrB0a3lzTGjLcJMhxHNKthkFjWMLGKsJ7+1YuJz/grZKTRTxWs9oGkkC5RltkFZwBO32oWx2DjtpSOGHOU2jxj+lcQ5GNtMz17jVk7dTRVlgTIpXBqvHov12cMDJEOFgQxbKZKITwTGsMcKmEa1CJHLSNBZGNG0iQWlIHg8jjBNJGUWTp2xPyNU1rWDjaJZw0u6p90KH9j2P86K+e5yjF1iqQ5o/5Oka0r/ZoWZUcEx9nkC1HGSzKx8uDqu5hvyMMVpbMqYVB5s0s+xNRUxB5F8zW+6rfHlga8qH2tcqP5gX3VN+kNqbRn+DsiIon+p3FX+487QF5+UDRF/EbsTnV+vaLARZLYrObqxjVhbZwYb8UytPJlojjFQ1FKA+K3hiS2/HAuYFM0iSRDM3iO1pVg5ZNViU4oPD7HyYxnfAfFR4D+ZFUifBOYzzBzhNgwpv7X6R66MZyhGGIBxxYhnErCh+wmr9rEvCqOHU65CzTwiI+FklcPUiWZapU4K0YZjbFi+bJwf5WPMGfaUdfwkiFbaX8PcDkxPq7oMLD1D5ToQ3nfcRHvVUemZA6Qc6VYNqj+4fBkpmkU1Mi8JWNClvM0CUcAHGbKFvyoITQV0G7yU24vO5kfZYMcBzpOiniiYw8m2rmAmAw90GNzB/2AYcrJDY5YAgDqsaF5ZP8sjF3ctmHz7WD3eethh1RIh0yDRmFNwVp4s7QOwiGH0HuYgUwTvlhBkQCAtIvBZiD+ZCbgEv1YmHIdLQPXYt3qet6SpusNrChPtROuGVLb7boc7Ult2e0Tg+vxjwd2XRJylkerDKKxtRH7nMLhE6CWg2ZBF3WJQgi1ttw65oA2HuWKhJ4WACnV2oCwijZSFZayE9vtYJnGzx3w50ogaVzodAFN4VVMTjisgTHgp9mENo6xZZyKGvEc/jwwodGuq1nx7m8OFMXDN3+FQKwoiOtT3CCDcKctRqAmDvkxZLWME2t2UEThY2L/tRO5JuQfmDnaohxWP6KzuiDiNQyQr1MNrNwty1hM16VZghrr/WtVm5tPdZwWbxYufE4zKIjBY/sxmMMYeZ4tlRe1Q6XZHCHVD6YU7T4E4HNWjczqN29XKyaDnllkBepZK4Hz3Jddhifoxf0xilku9EAPAMuyIANhUtwdFmI9xPmDatNIXLVNrH0rBZlEiw+MN9dL4RmtvqpVtcru+hM9DAx4qHtvihztG9Mm2HlDpsOSM0wSEMjxZnOHT0kS9CZiDrPUBmKCrOTl6CfULRN9jeHZlBBIAtmW5BDN96sl4E/nTZ/Dm94CrO/xxz9HNL/Lyfu94D3FJ9cz4l2o/Xi8t3s09RImKte5MibtPmh8+FiBruuBBM9+NxIWgtfv1MSwrokSGOXrz/efF5lAjerBVCw16pfkHrd6ehUck/hkqMSHHZV0WPHqFZv0O0IAiA3RA/A/5/8CwwOGQpYX/qg9b1SLMYaRYjzWKkWYw0i5FmMdIsRprFSLMYaRYjzWKkWYw0i5FmMdIsRprFSLMYaRYjzeI5kAdGmsVIsxhpFiPNYqRZjDSLkWbxXCgEI81ipFnsi2ZBpEUxGf1l6h5EsNDvzowEi+dBsFj9vs/GD/x8PrViSMjhL1hkZyk8gBWx+1tg7btIieEoNHRbcVCD8geI7ikKqJ/R+ewvnrj9haPJTN90stEBfkbN9wpiDwulVuPdugS1iGwav+fHVa6Ws6NP7+O25md8+8vgTv6K3/vSU9ez2YudBh91N1L+/nTxLv7y1suP/wNQSwECFAAUAAAACABFFMdahE17bn4AAAC4AAAADQAAAAAAAAAAAAAAAAAAAAAAbWFuaWZlc3QuanNvblBLAQIUABQAAAAIAEUUx1oGgqne6w0AAOxrAAApAAAAAAAAAAAAAAAAAKkAAABhbmltYXRpb25zL0FuaW1hdGlvbiAtIDE3NDkyMzAwMDM1MjEuanNvblBLBQYAAAAAAgACAJIAAADbDgAAAAA=",Rt=({initialAction:a})=>{const{t:s}=ue(),{user:i,signIn:r,signUp:n,signOut:l,closeAuthModal:f,addBalanceDoc:u,isCheckingEmailVerification:d,isAuthLoading:m,handleForgotPassword:h}=t.useContext(me),{isSmallScreen:c,refreshIsSmallScreen:g,addAlert:b}=t.useContext(le),[R,v]=t.useState(!1),[F,P]=t.useState(!1),[j,D]=t.useState(a||"register");t.useEffect(()=>(P(!0),()=>P(!1)),[]);const L=[{complete:!1,text:s("errors.password8"),regEx:".{8,}"},{complete:!1,text:s("errors.passwordUpper"),regEx:"(?=.*[A-Z])"},{complete:!1,text:s("errors.passwordLower"),regEx:"(?=.*[a-z])"},{complete:!1,text:s("errors.passwordNumber"),regEx:"(?=.*[0-9])"}],[y,S]=t.useState([]),I=t.useRef(null),x=t.useRef(null),H=t.useRef(null),J=t.useRef(null),te=t.useRef(null),z="border-x-0 pl-0 gap-2 border-t-0 !border-b-2 rounded-none font-medium",T=M=>{let O=[...L];if(O.forEach(p=>{p.complete=new RegExp(p.regEx).test(M)}),S(O),O.every(p=>p.complete))v(!0),S([]);else throw v(!1),new Error("Invalid password")},A=M=>{const p=new FormData(I.current).get("password");if(M!==p)throw new Error("Passwords do not match")},q=M=>{if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(M))throw new Error("Invalid email")},E=async M=>{M==null||M.preventDefault();try{let O=!0;if(O=x.current&&await x.current.validate()&&O,O=H.current&&await H.current.validate()&&O,!O){console.error("Invalid form");return}const p=new FormData(I.current),k=Object.fromEntries(p.entries());await r(k)}catch(O){b({type:"info",title:"Error signing in",message:O.message}),console.error("Error signing in:",O.message)}};t.useEffect(()=>{i&&i.emailVerified&&(async()=>{try{await u()}catch(O){console.error("Error creating balance doc:",O)}})()},[i,u]);const B=async M=>{M.preventDefault();try{let O=!0;if(O=J.current&&await J.current.validate()&&O,O=x.current&&await x.current.validate()&&O,O=H.current&&await H.current.validate()&&O,O=te.current&&await te.current.validate()&&O,!O){console.error("Invalid form");return}const p=new FormData(I.current),k=Object.fromEntries(p.entries());console.log("Submitting:",k),await n(k)}catch(O){b({type:"info",title:"Error signing up",message:O.message}),console.error("Error signing up:",O.message)}},_=async()=>{try{if(!x.current.validate)throw new Error("Email input is not valid");const M=new FormData(I.current),O=Object.fromEntries(M.entries());console.log(O.email),await h(O.email)}catch(M){b({type:"info",title:"Error sending reset email",message:M.message})}},X=F;return i!=null&&i.emailVerified&&f(),t.useEffect(()=>{g();const M=O=>{O.key==="Escape"&&f()};return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[f,g]),e.jsxs("div",{className:"fixed overflow-y-scroll scrollbar-hidden py-4 z-20 flex w-screen h-screen text-primary-text justify-center items-center",children:[e.jsx($.div,{className:"fixed z-20 top-0 left-0 w-screen h-screen bg-background-secondary/30",initial:{opacity:0},animate:{opacity:1,backdropFilter:"blur(4px)"},onClick:()=>f(),exit:{opacity:0,transition:{delay:.3,duration:.3}}}),e.jsx($.div,{initial:{y:"150%"},animate:{y:0},exit:{y:"150%"},transition:re,className:`flex z-30 ${c?"w-[min(48rem,100%)]":"w-[min(75rem,11/12*100%)]"} bg-signin-background ${j==="register"?"flex-row":"flex-row-reverse"} my-auto rounded-4xl max-w-[75rem] h-[45rem] overflow-clip justify-between`,children:e.jsx(de,{children:i&&!i.emailVerified?e.jsxs($.div,{initial:X?{scale:"150%"}:!1,animate:{scale:"100%"},transition:re,className:"p-[min(3rem,6%)] w-full flex flex-col h-full",children:[e.jsx(ie,{className:"!p-1 !pr-4 !size-min items-center flex text-primary-text",loading:m,onClick:()=>l(),children:e.jsxs("div",{className:"flex items-center gap-2 text-nowrap",children:[e.jsx(ve,{width:36,height:36,className:"rotate-180 text-primary"}),"Sign Out"]})}),e.jsx("div",{className:"flex flex-1 h-full flex-col justify-center items-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center max-w-md",children:[e.jsx($.div,{animate:{rotate:[0,-7,7,-7,7,0]},transition:{duration:2.5,times:[0,.05,.1,.15,.2,.25],ease:"easeInOut",repeat:1/0,repeatDelay:.75},children:e.jsx(na,{width:160,height:160,className:"fill-primary"})}),e.jsxs($.div,{className:"flex flex-col gap-2",children:[e.jsxs("h2",{className:"text-primary font-semibold gap-4 flex w-full text-xl",children:["A verification email has been sent to ",i.email,"."]}),e.jsx("p",{className:"text-primary-text",children:"Please verify your email address to continue."})]})]})})]}):i?e.jsx(e.Fragment,{}):j==="register"?e.jsxs(e.Fragment,{children:[e.jsxs($.div,{initial:X?{x:"100%"}:!1,animate:{x:0},exit:X?{x:"100%"}:!1,transition:re,className:"p-[min(3rem,6%)] justify-between min-w-fit flex flex-col flex-6 text-primary-text",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{className:"!p-1 !pr-4 !size-min items-center flex text-primary-text",onClick:()=>f(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{width:36,height:36,className:"rotate-180 text-primary"}),"Back"]})}),!c&&e.jsxs("div",{className:"inline-flex items-center text-primary-text",children:["Already a member?",e.jsx(ie,{onClick:()=>D("signin"),className:"font-semibold !p-1 ml-2 w-min !text-primary text-nowrap",children:"Sign In"})]})]}),e.jsxs("div",{className:"flex flex-col justify-center flex-1",children:[e.jsxs("div",{className:`${c?"flex-col":"flex-row-reverse"} flex justify-between items-start`,children:[e.jsx(Ie,{speed:.6,src:Qe,style:{left:"-7rem",position:"relative",height:"14rem",width:"14rem"},autoplay:!0,loop:!0}),e.jsxs("div",{children:[e.jsx("h1",{className:"pb-1 text-primary-text text-nowrap",children:"Sign Up"}),e.jsxs("h3",{className:"text-card-outline text-nowrap",children:["Secure your grades with"," ",e.jsx("b",{className:"italic text-primary",children:"Last Minute"})]})]})]}),e.jsxs("form",{ref:I,onSubmit:M=>B(M),className:"mt-10 flex flex-col gap-5",children:[e.jsx(ee,{name:"displayName",inputClassName:z,image:e.jsx(De,{width:24,height:24}),placeholder:s("placeholder.name"),disabled:m,validateFunction:M=>{if(M.length<3)throw new Error(s("errors.nameLength"))},required:!0,ref:J}),e.jsx(ee,{name:"email",inputClassName:z,image:e.jsx(wt,{width:24,height:24}),placeholder:s("placeholder.email"),disabled:m,validateFunction:M=>q(M),required:!0,ref:x}),e.jsx(ee,{name:"password",inputClassName:z,image:e.jsx(ze,{width:24,height:24}),placeholder:s("placeholder.password"),disabled:m,validateFunction:M=>T(M),type:"password",requirements:y,required:!0,ref:H}),R&&e.jsx(ee,{name:"retypePassword",inputClassName:z,image:e.jsx(ze,{width:24,height:24}),placeholder:s("placeholder.retypePassword"),disabled:m,validateFunction:M=>A(M),type:"password",required:!0,saveDelay:0,ref:te}),c&&e.jsxs("div",{className:"inline-flex items-center text-nowrap",children:["Already a member?",e.jsx(ie,{onClick:()=>D("signin"),className:"font-semibold !p-1 ml-2 w-min !text-primary text-nowrap",children:"Sign In"})]}),e.jsx(G,{type:"submit",loading:m,filled:!0,className:"w-[14rem] mt-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{children:s("button.signUp")}),e.jsx("div",{className:"p-2 rounded-full",children:e.jsx(ve,{style:{width:24,height:24},fill:"white"})})]})})]})]})]},"register"),!c&&e.jsx($.div,{initial:{x:"100%",scale:"150%"},animate:{x:0,scale:"100%"},transition:re,className:"flex-4",children:e.jsx(yt,{className:"fill-primary"})},"register-decoration")]}):e.jsxs(e.Fragment,{children:[e.jsxs($.div,{initial:X?{x:"-100%"}:!1,animate:{x:0},exit:X?{x:"-100%"}:!1,transition:re,className:"w-full flex flex-col min-w-fit p-[min(3rem,6%)] text-primary-text",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{className:"!p-1 !pr-4 !size-min items-center flex text-primary-text",onClick:()=>f(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{width:36,height:36,className:"rotate-180 text-primary"}),"Back"]})}),!c&&e.jsxs("div",{className:"inline-flex items-center text-primary-text",children:["Don't have an account?",e.jsx(ie,{onClick:()=>D("register"),className:"font-semibold !p-1 !size-min ml-2 w-min !text-primary text-nowrap",children:"Sign Up"})]})]}),e.jsxs("div",{className:"flex flex-col justify-center flex-1",children:[e.jsxs("div",{className:`${c?"flex-col":"flex-row-reverse"} flex justify-between items-start`,children:[e.jsx(Ie,{speed:.6,src:Qe,style:{left:"-7rem",position:"relative",height:"14rem",width:"14rem"},autoplay:!0,loop:!0}),e.jsxs("div",{children:[e.jsx("h1",{className:"pb-1 text-primary-text text-nowrap",children:"Sign In"}),e.jsxs("h3",{className:"text-card-outline text-nowrap",children:["Secure your grades with"," ",e.jsx("b",{className:"italic text-primary",children:"Last Minute"})]})]})]}),e.jsxs("form",{ref:I,onSubmit:M=>E(M),className:"mt-10 flex flex-col gap-6",children:[e.jsx(ee,{name:"email",inputClassName:z,image:e.jsx(wt,{width:24,height:24}),placeholder:s("placeholder.email"),disabled:m,validateFunction:M=>q(M),required:!0,ref:x}),e.jsx(ee,{name:"password",inputClassName:z,image:e.jsx(ze,{width:24,height:24}),placeholder:s("placeholder.password"),disabled:m,type:"password",required:!0,ref:H}),e.jsx(ie,{onClick:()=>_(),className:"font-semibold !p-1 ml-2 w-min !text-primary text-nowrap",children:"Forgot Password?"}),c&&e.jsxs("div",{className:"inline-flex items-center text-nowrap",children:["Don't have an account?",e.jsx(ie,{onClick:()=>D("register"),className:"font-semibold !p-1 ml-2 w-min !text-primary text-nowrap",children:"Sign Up"})]}),e.jsx(G,{type:"submit",filled:!0,loading:m,className:"w-[14rem] mt-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{children:s("button.signIn")}),e.jsx("div",{className:"p-2 rounded-full",children:e.jsx(ve,{style:{width:24,height:24},fill:"white"})})]})})]})]})]},"signin"),!c&&e.jsx($.div,{initial:{x:"-100%",scale:"150%"},animate:{x:0,scale:"100%"},transition:re,className:"flex-4",children:e.jsx(yt,{className:"fill-primary",style:{transform:"scaleX(-1)"}})},"signin-decoration")]})})},"auth-modal")]})};Rt.propTypes={initialAction:o.oneOf(["register","signin"])};const ia={user:void 0,balance:void 0,isCheckingEmailVerification:!1,signUp:async()=>Promise.resolve(),signIn:async()=>Promise.resolve(),signOut:async()=>Promise.resolve(),applyTutor:async()=>Promise.resolve(),addTutor:async()=>Promise.resolve(),addAdmin:async()=>Promise.resolve(),checkEmailVerification:async()=>Promise.resolve()},me=t.createContext(ia),Pt=({children:a})=>{const{addAlert:s,setSelectedTheme:i}=t.useContext(le),[r,n]=t.useState(V.currentUser||void 0);Me("UserContextProvider",r);const[l,f]=t.useState(0),[u,d]=t.useState(!1),m=t.useRef(null),[h,c]=t.useState(!1),[g,b]=t.useState(!1),R=t.useRef(null),v=jt(),F=()=>{R.current&&(clearInterval(R.current),R.current=null,c(!1))},P=()=>{F(),r&&!r.emailVerified&&(c(!0),R.current=setInterval(async()=>{await j()&&F()},2e3))},j=async()=>{try{return V.currentUser?(await mt(V.currentUser),V.currentUser.emailVerified&&n(p=>p&&!p.emailVerified?{...p,emailVerified:!0}:p),V.currentUser.emailVerified):!1}catch(p){return console.error("Error checking email verification:",p),!1}};t.useEffect(()=>{const p=Wt(V,async k=>{if(k){const Q=await k.getIdTokenResult(!0);k.claims=Q.claims}k!==r&&b(!1),n(k),k||localStorage.clear()});return()=>{p(),F()}},[]),t.useEffect(()=>(r&&!r.emailVerified&&(console.log("User is not verified. Starting verification interval."),d(!0),P()),()=>F()),[r]);const D=async({displayName:p,email:k,password:Q})=>{b(!0);try{const oe=await es(V,k,Q);await ut(oe.user,{displayName:p}),console.log("Signed up successfully!"),await ft(V.currentUser)}catch(oe){throw b(!1),oe}},L=async({email:p,password:k})=>{b(!0);try{await _t(V,p,k),console.log("Signed in successfully!"),V.currentUser.emailVerified===!1&&await ft(V.currentUser)}catch(Q){throw b(!1),Q}},y=async()=>{b(!0);try{F(),i("default"),await Ne(V),console.log("Signed out successfully!")}catch(p){throw b(!1),p}},S=Ge(Je,"setTutorClaim"),I=async p=>{try{await S({email:p,isTutor:!0}),s({type:"info",title:"Tutor Added",message:`The user ${p} has been added as a tutor.`})}catch{s({type:"error",title:"Error",message:`There was an error adding the user ${p} as a tutor.`})}},x=Ge(Je,"setAdminClaim"),H=async p=>{try{await x({email:p,isAdmin:!0}),s({type:"info",title:"Admin Added",message:`The user ${p} has been added as an admin.`})}catch(k){s({type:"error",title:"Error",message:`There was an error adding the user ${p} as an admin.`}),console.error("Error adding admin:",k)}},J=p=>{(!r||r&&!r.emailVerified)&&(m.current=p,d(!0))},te=()=>{d(!1)},z=async()=>{if(!r){console.error("No authenticated user found.");return}try{await Se(fe(ae,"balance",r.uid),{money:0}),console.log("Balance document created successfully.")}catch(p){console.error("Error initializing balance document:",p)}},T=async p=>{if(!r){console.error("No authenticated user found.");return}try{const k=fe(ae,"balance",r.uid);await We(k,{money:Nt(p)});const Q=p>=0?"increased":"decreased";s({type:"success",title:"Balance Updated",message:`Balance ${Q} by $${parseFloat(p,2)}.`})}catch(k){s({type:"error",title:"Error",message:"Error updating balance."}),console.error("Error updating balance:",k)}};t.useEffect(()=>{if(!r){f(0);return}const p=fe(ae,"balance",r.uid),k=je(p,Q=>{Q.exists()?f(Q.data().money||0):f(0)},Q=>{console.error("Error listening to balance updates:",Q),f(0)});return()=>k()},[r]);const A=async p=>{try{await dt(V,p),typeof s=="function"&&s({type:"success",title:"Reset Email Sent",message:`A password reset email has been sent to ${p}.`})}catch(k){throw typeof s=="function"&&s({type:"error",title:"Reset Failed",message:k.message||"Failed to send reset email."}),console.error("Error sending password reset email:",k),k}},q=async p=>{try{await A(p)}catch(k){throw typeof s=="function"&&s({type:"error",title:"Reset Failed",message:k.message||"Failed to send reset email."}),console.error("Error in handleForgotPassword:",k),k}},E=async(p,k)=>{if(!p||!k)throw new Error("File and userId are required for upload");const Q=ts(v,`profilePictures/${k}/${p.name}`);return await ss(Q,p),console.log("File uploaded successfully:",Oe(Q)),console.log(Oe(Q)),await Oe(Q)},B=async p=>{b(!0);try{if(!V.currentUser)throw new Error("No authenticated user found.");let k=p.photoURL;p.profilePictureFile&&(console.log("Uploading profile picture..."),k=await E(p.profilePictureFile,V.currentUser.uid));const{displayName:Q,email:oe,phoneNumber:ne}=p;(Q||k)&&await ut(V.currentUser,{displayName:Q,photoURL:k}),oe&&oe!==V.currentUser.email&&await Qt(V.currentUser,oe),ne&&ne!==V.currentUser.phoneNumber&&await Xt(V.currentUser,ne),await mt(V.currentUser),n({...V.currentUser})}catch(k){throw console.error("Error updating user profile:",k),new Error("Error updating user profile")}finally{b(!1)}},_=async()=>{var p;try{if((p=r.claims)!=null&&p.isTutor){s({type:"info",title:"Already a Tutor",message:"You are already a tutor!"});return}if((await fe(ae,"tutorApplications",r.uid).get()).exists()){s({type:"info",title:"Already Applied",message:"You have already applied to be a tutor!"});return}await Se(fe(ae,"tutorApplications",r.uid),{email:r.email,uid:r.uid,displayName:r.displayName,photoURL:r.photoURL}),s({type:"info",title:"Application Sent",message:"Your application to be a tutor has been sent!"})}catch{s({type:"info",title:"Error",message:"There was an error applying to be a tutor."})}},X=async()=>{var p;try{return V.currentUser?(await V.currentUser.delete(),typeof s=="function"&&s({message:"Account deleted successfully",type:"success"}),"success"):(typeof s=="function"&&s({message:"No user is currently signed in",type:"error"}),"error")}catch(k){return k.code==="auth/requires-recent-login"||(p=k.message)!=null&&p.includes("recent")?(typeof s=="function"&&s({message:"Please sign in again to delete your account for security reasons.",type:"error"}),"reauth-required"):(typeof s=="function"&&s({message:"Failed to delete account: "+k.message,type:"error"}),console.error("Error deleting account:",k),"error")}},M=async(p,k)=>{var Q,oe;try{if(console.log(V),!V.currentUser||!V.currentUser.email)return typeof s=="function"&&s({message:"No user is currently signed in",type:"error"}),"error";console.log("Changing password for user:",V.currentUser.email);const ne=Yt.credential(V.currentUser.email,p);return console.log("Re-authenticating with credential:",ne),await Kt(V.currentUser,ne),await Jt(V.currentUser,k),console.log("Password changed successfully for user:",V.currentUser.email),typeof s=="function"&&s({message:"Password changed successfully",type:"success"}),"success"}catch(ne){return ne.code==="auth/requires-recent-login"||(Q=ne.message)!=null&&Q.includes("recent")?(typeof s=="function"&&s({message:"Please sign in again to change your password for security reasons.",type:"error"}),"reauth-required"):ne.code==="auth/wrong-password"||(oe=ne.message)!=null&&oe.toLowerCase().includes("password")?(typeof s=="function"&&s({message:"Current password is incorrect.",type:"error"}),"error"):(typeof s=="function"&&s({message:"Failed to change password: "+ne.message,type:"error"}),console.error("Error changing password:",ne),"error")}},O=async()=>{var p;try{return(p=V.currentUser)!=null&&p.email?(await dt(V,V.currentUser.email),typeof s=="function"&&s({message:"Password reset email sent.",type:"success"}),"success"):(typeof s=="function"&&s({message:"No user email found for reset.",type:"error"}),"error")}catch(k){return typeof s=="function"&&s({message:"Failed to send reset email: "+k.message,type:"error"}),"error"}};return e.jsxs(me.Provider,{value:{user:r,isAuthLoading:g,isCheckingEmailVerification:h,balance:l,signUp:D,signIn:L,signOut:y,applyTutor:_,addTutor:I,addAdmin:H,openAuthModal:J,closeAuthModal:te,addBalanceDoc:z,updateBalance:T,resetPassword:A,handleForgotPassword:q,updateUserProfile:B,deleteAccount:X,changePassword:M,sendResetPassword:O},children:[e.jsx(de,{children:u&&e.jsx(Rt,{initialAction:m.current})}),a]})};Pt.propTypes={children:o.node.isRequired};const Xe="/last-minute/assets/image-BYOStcvf.png",Dt=({scrollContainerRef:a={current:null}})=>{var L;const{t:s}=ue(),{user:i,openAuthModal:r,balance:n}=t.use(me),[l,f]=t.useState(!1),[u,d]=t.useState(!1),[m,h]=t.useState(!1),[c,g]=t.useState(null),{isSmallScreen:b}=t.use(le),R=Ee(),v=t.useCallback(async()=>{try{await Ne(V),console.log("Signed out successfully!"),R("/")}catch(y){console.error("Error signing out:",y)}},[R]);t.useEffect(()=>{b&&(f(!1),h(!1))},[b]),t.useEffect(()=>{const y=()=>{d(a.current.scrollTop>0)},S=a.current;return S&&S.addEventListener("scroll",y),()=>{S&&S.removeEventListener("scroll",y)}},[a]);const F=i?[{name:s("navbar.dashboard"),path:"/"},(L=i.claims)!=null&&L.isAdmin?{name:s("navbar.requests"),path:"/requests"}:{name:s("navbar.booking"),path:"/booking"},{name:s("navbar.history"),path:"/history"}]:[{name:s("navbar.home"),path:"/"},{name:s("navbar.contact"),path:"/contact"},{name:s("navbar.faq"),path:"/faq"}],P={hidden:{opacity:0,y:-10},visible:{opacity:1,y:0},exit:{opacity:0,y:10,transition:{delay:i?.1:.15,duration:.2}}},j={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,staggerDirection:-1,duration:.3}},exit:{opacity:0,transition:{staggerChildren:.05,staggerDirection:-1,duration:.3}}},D={hidden:{opacity:0,y:-10},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:10,transition:{duration:.2}}};return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:`fixed h-[4.5rem] z-10 top-0 flex justify-between w-full py-4 px-6
        border-b border-transparent transition-colors bg-background duration-300 ${u?"!border-background-secondary/30":""}`,children:[e.jsx($.div,{className:"flex items-center text-2xl justify-start max-md:flex-1",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:re,children:e.jsxs(Ze,{to:"/",className:"font-semibold text-nowrap focus:ring-offset-2 flex flex-row items-center",children:[e.jsx("div",{children:s("appName")}),e.jsx("div",{className:"flex-1",children:e.jsx(Ie,{speed:.6,dotLottieRefCallback:g,src:Qe,style:{left:"-3rem",position:"relative",height:"10rem",width:"10rem"},autoplay:!0,loop:!0})})]})}),b?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-min aspect-square flex !p-1.5 items-center justify-center",onClick:()=>f(!l),children:e.jsx(aa,{width:28,height:28,className:"fill-primary-text"})}),e.jsx(de,{mode:"wait",children:l&&e.jsxs(e.Fragment,{children:[e.jsx($.div,{className:"absolute z-20 top-0 left-0 w-screen h-screen bg-background-secondary/30",initial:{opacity:0},animate:{opacity:1,backdropFilter:"blur(4px)"},exit:{opacity:0,transition:{delay:.3,duration:.3}},onClick:()=>f(!1)}),e.jsxs($.div,{className:"w-72 max-w-4/5 fixed z-30 top-0 text-end flex flex-col px-6 py-4 right-0 h-screen bg-background",initial:{x:"100%",boxShadow:"0px 0px 0px 0px rgba(0, 0, 0, 0)"},animate:{x:0,boxShadow:"3px 0px 10px 2px rgba(0, 0, 0, 0.1)"},exit:{x:"100%",boxShadow:"0px 0px 0px 0px rgba(0, 0, 0, 0.1)"},transition:re,children:[e.jsx(ie,{className:"w-min aspect-square flex !p-1 items-center mb-2 justify-center ml-auto",onClick:()=>f(!1),children:e.jsx(Ct,{width:32,height:32,className:"fill-primary-text"})}),e.jsxs($.div,{className:"flex gap-2 flex-row items-center mb-4",onClick:()=>h(!m),children:[e.jsx($.div,{className:"border-1 rounded-full bg-background-secondary/50 w-10 h-10 flex items-center justify-center",children:i!=null&&i.photoURL?e.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-10 h-10 object-cover rounded-full",onError:y=>{y.target.onerror=null,y.target.src=Xe}}):e.jsx(De,{width:40,height:40,className:"fill-primary-text"})}),e.jsxs($.div,{className:"flex flex-1 flex-col items-start",children:[e.jsx("p",{className:"text-sm font-semibold text-primary-text",children:(i==null?void 0:i.displayName)||"User"}),e.jsxs("p",{className:"text-xs flex gap-2 text-primary-text",children:[e.jsx(He,{width:16,height:16,className:"fill-primary-text"}),n!==void 0?n.toFixed(2):"0.00"]})]}),e.jsx($.div,{className:"flex items-center justify-center",children:e.jsx(we,{to:"/settings",children:e.jsx(ie,{className:"flex aspect-square w-min p-1 items-center justify-center",onClick:()=>f(!1),children:e.jsx(xt,{width:24,height:24,className:"fill-primary-text"})})})})]}),e.jsx(G,{filled:!0,onClick:()=>{f(!1),i?v():r()},children:s(i?"navbar.signOut":"navbar.signInRegister")}),e.jsx("p",{className:"text-xl text-primary-text font-semibold mr-3 mt-6 mb-2",children:s("navbar.navigation")}),F.map(y=>e.jsx(Ze,{to:y.path,className:({isActive:S})=>S?" bg-background-secondary/50 rounded-md pointer-events-none":void 0,children:e.jsx(ie,{onClick:()=>f(!1),className:"py-2 flex justify-end text-right",children:e.jsx("p",{className:"w-full",children:y.name})})},y.name))]})]})})]}):e.jsxs("div",{className:"text-lg font-medium items-center justify-end inline-flex top-0 py-0 gap-4",children:[e.jsx(de,{mode:"wait",children:e.jsx($.div,{className:"inline-flex gap-2",initial:"hidden",animate:"visible",exit:"exit",variants:j,children:F.map((y,S)=>e.jsx($.div,{custom:S,variants:P,children:e.jsx(Ze,{to:y.path,className:({isActive:I})=>I?"underline underline-offset-4 underline-primary pointer-events-none":void 0,children:e.jsx(ie,{children:y.name})})},y.name))},i?"user-nav":"guest-nav")}),e.jsx(de,{mode:"wait",children:i?e.jsxs($.div,{className:"flex gap-2 flex-row items-center relative",initial:"hidden",animate:"visible",exit:"exit",variants:j,children:[e.jsx(ie,{className:`flex flex-row items-center justify-center ${m?"bg-interactive-hover":""}`,onClick:()=>h(!m),children:e.jsxs($.div,{className:"flex gap-4 items-center",children:[e.jsx($.div,{className:"flex items-center",children:e.jsxs("p",{className:"text-md font-semibold text-primary-text text-nowrap flex gap-2",children:[e.jsx(He,{width:24,height:24,className:"fill-primary-text"}),n!==void 0?n.toFixed(2):"0.00"]})}),e.jsx($.div,{className:"border-1 rounded-full bg-background-secondary/50 w-10 h-10 flex items-center justify-center",children:i!=null&&i.photoURL?e.jsx("img",{src:i.photoURL,alt:"Profile",className:"w-full h-full object-cover rounded-full",onError:y=>{y.target.onerror=null,y.target.src=Xe}}):e.jsx(De,{width:40,height:40,className:"fill-primary-text"})})]})}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>h(!1)}),e.jsx("div",{className:"absolute right-0 z-50",style:{top:"calc(100% + 8px)"},children:e.jsxs("div",{className:"w-56 border rounded shadow-lg bg-card-background border-card-outline text-primary-text",children:[e.jsxs(we,{to:"/settings",className:"w-full text-left px-4 py-3 flex items-center gap-2 hover:bg-interactive-hover",onClick:()=>h(!1),children:[e.jsx(xt,{width:20,height:20,className:"fill-primary-text"}),s("navbar.settings")]}),e.jsxs(we,{to:{pathname:"/settings",hash:"profile"},className:"w-full text-left px-4 py-3 flex items-center gap-2 hover:bg-interactive-hover",onClick:()=>h(!1),children:[e.jsx(De,{width:20,height:20,className:"fill-primary-text"}),s("navbar.profile")]}),e.jsxs(we,{to:{pathname:"/settings",hash:"payment"},className:"w-full text-left px-4 py-3 flex items-center gap-2 hover:bg-interactive-hover",onClick:()=>h(!1),children:[e.jsx(He,{width:20,height:20,className:"fill-primary-text"}),s("navbar.balance")]}),e.jsx("div",{className:"border-t border-card-outline/50"}),e.jsx("button",{className:"w-full text-left px-4 py-3 flex items-center gap-2 hover:bg-interactive-hover text-error cursor-pointer",onClick:async()=>{h(!1),await v()},children:s("navbar.signOut")})]})})]})]},"user-auth"):e.jsxs($.div,{className:"flex gap-2 flex-row",initial:"hidden",animate:"visible",exit:"exit",variants:j,children:[e.jsx($.div,{variants:D,children:e.jsx(G,{onClick:()=>r("register"),children:s("navbar.signUp")})}),e.jsx($.div,{variants:D,children:e.jsx(G,{onClick:()=>r("signin"),filled:!0,children:s("button.signIn")})})]},"guest-auth")})]})]})})};Dt.propTypes={scrollContainerRef:o.object.isRequired};const ee=({label:a="",image:s=null,onChange:i=()=>{},className:r="",inputClassName:n="",validateFunction:l,multiline:f=!1,options:u=[],onOptionSelect:d=()=>{},type:m,value:h,forceSuggestions:c=!1,requirements:g=[],autoSave:b=!1,saveDelay:R=500,ref:v,selectOnFocus:F=!1,...P})=>{const j=b||`form_${P.name}`,[D,L]=Ae(b?j:null,h),[y,S]=t.useState(""),[I,x]=t.useState(!1),[H,J]=t.useState(-1),[te,z]=t.useState(u),[T,A]=t.useState(b&&D?D:h!==void 0?h:""),[q,E]=t.useState(!1),B=t.useRef(null),_=t.useRef(null),X=t.useRef(null),M=t.useRef(null),O=Ke(N=>{b&&(L(N),console.log(`Auto-saved value for ${P.name}: ${N}`))},R);t.useEffect(()=>{if(H>=0&&B.current&&m==="suggest"&&I)try{const N=B.current.querySelectorAll("div");if(N&&N.length>H){const U=N[H];if(U){const se=B.current.getBoundingClientRect(),ce=U.getBoundingClientRect();(ce.bottom>se.bottom||ce.top<se.top)&&U.scrollIntoView({behavior:"smooth",block:"nearest"})}}}catch(N){console.error("Error scrolling dropdown option into view:",N)}},[H,I,m]),t.useImperativeHandle(v,()=>({validate:()=>k(T),getSavedValue:()=>D,saveValue:N=>b&&L(N||T),reset:()=>{A(""),L("")},focus:()=>{var U;const N=(U=_.current)==null?void 0:U.querySelector("input, textarea");N&&N.focus()}})),t.useEffect(()=>{const N=U=>{I&&_.current&&!_.current.contains(U.target)&&B.current&&!B.current.contains(U.target)&&x(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[I]),t.useEffect(()=>{m==="suggest"&&I&&T===""&&(z(u),J(u.length>0?0:-1))},[u]),t.useEffect(()=>{if(h!==void 0){if(m==="suggest"){let N=h;const U=u.find(se=>typeof se=="string"?se===h:se.value===h);U&&(N=typeof U=="string"?U:U.label),A(N)}else A(h);h===""&&E(!1)}},[h,b,m,u]),t.useEffect(()=>()=>{b&&T&&(L(T),console.log(`Saved ${P.name} value on unmount: ${T}`))},[]);const p=N=>{if(!N.length){z(u);return}const U=N.toLowerCase(),se=u.filter(ce=>typeof ce=="string"?ce.toLowerCase().includes(U):ce.label.toLowerCase().includes(U));z(se),J(se.length>0?0:-1)},k=async N=>{if(P.required&&(!N||N.trim()===""))return S("This field is required"),l&&l(""),!1;if(m==="suggest"&&c&&N&&!q&&!u.some(se=>(typeof se=="string"?se:se.label).toLowerCase()===N.toLowerCase()))return S("Please select a value from the options available"),!1;if(l)try{return await l(N),S(""),!0}catch(U){return S(U.message),!1}else return S(""),!0},Q=Ke(k,500),oe=N=>{S("");const U=N.target.value;A(U),m==="suggest"&&(E(!1),p(U)),Q(U),O(U),i(N)},ne=()=>{x(!0),m==="suggest"&&(z(u),J(u.length>0?0:-1)),F&&M.current&&M.current.select()},ke=N=>{if(k(T),b&&L(T),m!=="suggest"){x(!1);return}(N.relatedTarget===null||B.current&&!B.current.contains(N.relatedTarget))&&requestAnimationFrame(()=>{x(!1)})},Re=N=>{const U=typeof N=="string"?N:N.value,se=typeof N=="string"?N:N.label;A(se),E(!0);const ce={target:{name:P.name,value:U}};i(ce),d(U,se),x(!1),S(""),b&&L(se)},Ve=N=>{!I||m!=="suggest"||!te.length||(N.key==="ArrowDown"?(N.preventDefault(),J(U=>U<te.length-1?U+1:0)):N.key==="ArrowUp"?(N.preventDefault(),J(U=>U>0?U-1:te.length-1)):N.key==="Enter"&&H>=0?(N.preventDefault(),Re(te[H])):N.key==="Escape"?(N.preventDefault(),x(!1)):N.key==="Tab"&&x(!1))},Ce=`${y&&!I?"!border-error !fill-error":I?"fill-primary":"fill-input-icon"} 
    ${n||"p-2"} mt-0.5 flex flex-1 bg-input-background border-2 border-primary/50 transition-all rounded focus:outline-none focus:ring-2 focus:ring-primary font-medium`;return m==="display"?e.jsx("input",{className:`${r} pointer-events-none`,type:"text",name:P.name,value:D}):e.jsxs($.label,{className:`${r} w-full flex flex-col text-sm font-semibold relative`,htmlFor:P.name,layout:!0,ref:_,children:[a,P.required&&a&&"*",e.jsxs("div",{className:`${s?Ce+" !pl-1 "+(I&&n?"!border-b-3":""):""} w-full items-center flex flex-row`,children:[s,f?e.jsx("textarea",{...P,value:T,name:P.name,disabled:P.disabled,rows:f===!0?3:f,onChange:oe,onBlur:ke,className:`${s?"flex-1 p-2":Ce} resize-none min-h-[70px]`,ref:M}):e.jsx("input",{name:P.name,value:T,type:m==="suggest"?"text":m,onChange:oe,onFocus:ne,onBlur:ke,onKeyDown:Ve,disabled:P.disabled,placeholder:P.placeholder,className:s?"flex-1  p-2":Ce,min:P.min,max:P.max,autoComplete:m==="suggest"?"off":P.autoComplete,ref:M,autoFocus:P.autoFocus})]}),m==="suggest"?e.jsx(de,{children:I&&te.length>0&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:{duration:.1}},exit:{opacity:0,y:-10,transition:{duration:.1}},transition:re,className:"absolute left-0 right-0 top-full mt-1 max-h-60 overflow-y-auto rounded-md border border-primary/30 bg-input-background shadow-lg z-10",ref:B,children:te.map((N,U)=>{const se=typeof N=="string"?N:N.label;return e.jsx("div",{className:`px-3 py-2 cursor-pointer hover:bg-primary/10 ${U===H?"bg-primary/20":""}`,onPointerDown:()=>Re(N),onMouseEnter:()=>J(U),ref:U===H?X:null,children:se},U)})})}):null,e.jsx(de,{children:g.length!==0&&m!=="suggest"&&e.jsx($.ul,{initial:{height:0,opacity:0,marginTop:0},animate:{height:32*g.length,opacity:1,marginTop:4},exit:{height:0,opacity:0,marginTop:-10},transition:re,style:{listStyle:"none",paddingTop:10,maxWidth:400},children:g.map((N,U)=>e.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:4,color:y&&!I?"var(--color-error)":N.complete?"#22c55e":"#99a1af"},className:"font-normal transition-all",children:[e.jsx("span",{style:{width:20,marginRight:10,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:N.complete?"✔":"●"}),N.text]},U))})}),e.jsx(de,{children:!g.length&&y&&(!te.length||!I)&&e.jsx($.div,{initial:{height:0,opacity:0,marginTop:0},animate:{height:4,opacity:1,marginTop:4},exit:{height:0,opacity:0,marginTop:0,transition:{duration:.15}},transition:re,children:e.jsx($.p,{className:"text-error",children:y})})})]})};ee.propTypes={name:o.string.isRequired,type:o.oneOf(["text","password","email","number","tel","url","search","date","datetime-local","month","week","time","color","suggest"]),onChange:o.func.isRequired,placeholder:o.string,value:o.string,required:o.bool,className:o.string,disabled:o.bool,autoSave:o.oneOfType([o.bool,o.string]),saveDelay:o.number,enterKeyHint:o.oneOf(["none","go","next","search","send"]),autoComplete:o.oneOf(["on","off","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","email","username","new-password","current-password","organization-title","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-extension","impp","url","photo"]),min:o.string,max:o.string,autoFocus:o.bool,validateFunction:o.func,errorMessage:o.string,multiline:o.oneOfType([o.bool,o.number]),options:o.arrayOf(o.oneOfType([o.string,o.shape({label:o.string.isRequired,value:o.string.isRequired})])),onOptionSelect:o.func,forceSuggestions:o.bool,ref:o.oneOfType([o.func,o.shape({current:o.instanceOf(Element)})]),label:o.string,image:o.node,inputClassName:o.string,requirements:o.arrayOf(o.shape({text:o.string.isRequired,complete:o.bool.isRequired})),selectOnFocus:o.bool};const oa=a=>a.map(s=>s.createdAt?s:{...s,optimisticCreatedAt:new Date}),rt=t.memo(function({courseId:s,courseData:i}){const{user:r}=t.useContext(me),[n,l]=t.useState([]),[f,u]=t.useState(!0),[d,m]=t.useState(!0),h=t.useRef(null),c=t.useRef(null),g=t.useRef(null),b=oa(n);t.useEffect(()=>{if(!s)return;u(!0);const j=be(xe(ae,"courses",s,"chat"),Ye("createdAt","asc")),D=je(j,L=>{const y=L.docs.map(S=>({id:S.id,...S.data()}));l(y),u(!1)},L=>{console.error("Error fetching chat messages:",L),u(!1)});return()=>D()},[s]),t.useEffect(()=>{if(g.current){const D=setTimeout(()=>{g.current.scrollTo({top:g.current.scrollHeight,behavior:d?"auto":"smooth"}),d&&!f&&m(!1)},100);return()=>clearTimeout(D)}},[n,d,f]);const R=async j=>{j.preventDefault();const D=new FormData(h.current),y=Object.fromEntries(D.entries()).message.trim();if(!y)return;const S={id:`temp-${Date.now()}`,text:y,senderId:r.uid,optimisticCreatedAt:new Date};l(I=>[...I,S]);try{await kt(xe(ae,"courses",s,"chat"),{text:y,senderId:r.uid,createdAt:st()}),c.current.reset()}catch(I){l(x=>x.filter(H=>H.id!==S.id)),console.error("Error sending message:",I)}},v=j=>i?j===r.uid?"You":j===i.tuteeId?i.tuteeDisplayName||"Student":j===i.tutorId?i.tutorDisplayName||"Tutor":j==="system"?"System":j:j,F=j=>(j.createdAt?j.createdAt.toDate():j.optimisticCreatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),P=()=>f?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Loading messages..."})]})}):b.length===0?e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},transition:re,className:"text-center text-gray-500 italic mt-4",children:"No messages yet. Start the conversation!"}):e.jsx(de,{children:b.map(j=>{const D=j.senderId===r.uid;return e.jsxs($.div,{className:`flex flex-col max-w-[80%] ${D?"self-end":"self-start"}`,initial:{opacity:0,y:20,scale:.9,x:D?20:-20},animate:{opacity:1,y:0,scale:1,x:0},transition:re,children:[e.jsx("div",{className:`text-xs font-medium ${D?"text-right":"text-left"} text-gray-600`,children:v(j.senderId)}),e.jsx("div",{className:`p-3 rounded-lg ${D?"bg-chat-own-message text-white rounded-br-none":"bg-chat-other-message text-gray-800 rounded-bl-none"}`,children:j.text}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${D?"text-right":"text-left"}`,children:F(j)})]},j.id)})});return e.jsx(pe,{scrolling:!0,header:"Chat",className:"min-w-xs max-w-sm",footer:e.jsxs($.form,{className:"flex gap-2 items-center mt-3 pt-2 border-t border-gray-200",ref:h,onSubmit:j=>R(j),autoComplete:"off",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:re,children:[e.jsx(ee,{ref:c,name:"message",type:"text",placeholder:"Type your message...",autoComplete:"off"}),e.jsx(G,{onClick:()=>{var j;return(j=c.current)==null?void 0:j.focus()},type:"submit",children:"Send"})]}),children:r&&e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{ref:g,className:"flex flex-1 flex-col overflow-y-auto scrollbar-hidden p-2 space-y-3",children:P()})})})});rt.propTypes={courseId:o.string.isRequired,courseData:o.shape({tuteeId:o.string,tuteeDisplayName:o.string,tutorId:o.string,tutorDisplayName:o.string}).isRequired};const bt=()=>{const{openAuthModal:a}=t.useContext(me),{setSelectedTheme:s}=t.useContext(le);return s("default"),e.jsxs("div",{className:" w-full overflow-x-hidden",style:{marginTop:Be},children:[e.jsxs("section",{className:"mx-auto flex flex-col md:flex-row items-center py-16 px-4",id:"home",children:[e.jsxs("div",{className:"flex-1 mb-8 md:mb-0 px-24",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"Need a little help in your studies?"}),e.jsx("p",{className:"text-lg text-gray-700 mb-8",children:"Last Minute is here to connect you with expert tutors for instant help. Book a session in just a few clicks and get the support you need, when you need it."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(G,{filled:!0,onClick:()=>a("register"),children:"Get Started"}),e.jsx(G,{children:"Learn More"})]})]}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx("img",{src:"https://internationalteacherstraining.com/blog/wp-content/uploads/2018/08/171219-teacher-stock.jpg",alt:"Hero",className:"rounded-lg shadow-lg w-full max-w-md object-cover"})})]}),e.jsx("section",{className:"bg-primary py-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary-text mb-6",children:"Trusted by Students from Top Universities"}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8",children:[e.jsx("img",{src:"https://th.bing.com/th/id/R.156aa5488718d890bc8c70916c0b9182?rik=M6sv5EpasSrETQ&riu=http%3a%2f%2fassets.stickpng.com%2fimages%2f62796faf53c8a73e766a78ec.png&ehk=6q6LLlsmsHhi4MxNPPKAqCK4Id0JmX0LibGepLNdTVk%3d&risl=&pid=ImgRaw&r=0",alt:"Harvard Logo",className:"h-12 object-contain"}),e.jsx("img",{src:"https://logospng.org/download/mit/logo-mit-icon-1024.png",alt:"MIT Logo",className:"h-12 object-contain"}),e.jsx("img",{src:"https://th.bing.com/th/id/R.9befa47161458a8d8e613024c51bba4e?rik=jSUoyYjXMv0gmw&riu=http%3a%2f%2fwww.binus.edu%2fwp-content%2fuploads%2f2016%2f11%2flogoBINUS.png&ehk=rbDN0%2bRCc2agmoDFAZ0EmaQP9zg24uhZMCvNliwyh04%3d&risl=&pid=ImgRaw&r=0",alt:"Binus University Logo",className:"h-12 object-contain"}),e.jsx("img",{src:"https://th.bing.com/th/id/R.6cc081bbad665c66ba2e27e28bc04d9c?rik=qh3OhKIt81z2Bg&riu=http%3a%2f%2fde.academic.ru%2fpictures%2fdewiki%2f79%2fOfficial_Yale_Shield.png&ehk=Dm3kOWuFsAE6qunb3E2VUjCLtLwBQTrwyfQEClfF%2bfU%3d&risl=&pid=ImgRaw&r=0",alt:"Yale Logo",className:"h-12 object-contain"})]})]})}),e.jsxs("section",{className:"max-w-7xl mx-auto py-16 px-4",id:"about",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-text mb-12",children:"How it works?"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow p-6 flex flex-col items-center",children:[e.jsx("img",{src:"https://img.icons8.com/ios-glyphs/60/000000/calendar.png",alt:"Step Icon",className:"mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-primary-text mb-2",children:"Book your class"}),e.jsx("p",{className:"text-primary-text text-center",children:"Choose a subject, topic, and tutor, then book a session at your convenience."})]}),e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow p-6 flex flex-col items-center",children:[e.jsx("img",{src:"https://img.icons8.com/ios-glyphs/60/000000/wallet--v1.png",alt:"Step Icon",className:"mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-primary-text mb-2",children:"Pay for your class"}),e.jsx("p",{className:"text-primary-text text-center",children:"Securely pay for your class using our trusted payment gateway."})]}),e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow p-6 flex flex-col items-center",children:[e.jsx("img",{src:"https://img.icons8.com/ios-glyphs/60/000000/video-call.png",alt:"Step Icon",className:"mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-primary-text mb-2",children:"Join your class"}),e.jsx("p",{className:"text-primary-text text-center",children:"Connect with your tutor via our secure video platform."})]})]})]}),e.jsxs("section",{className:"max-w-4xl mx-auto py-16 px-4 text-center flex flex-col items-center",children:[e.jsx("h2",{className:"text-lg text-primary font-semibold mb-2",children:"Last Minute"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Invest in your future today."}),e.jsx("p",{className:"text-gray-700 mb-8",children:"Our aim is to help you achieve academic success, with mere minutes of commitment for your learning convenience."}),e.jsx(G,{filled:!0,onClick:()=>null,className:"w-fit",children:"Learn More"})]}),e.jsx("div",{className:"max-w-7xl mx-auto mb-8 px-4",children:e.jsx("img",{src:"https://cdn.bfldr.com/SH6M70M3/as/svq9bmn6kxj2jj4j6z57vx/Woman_sitting_on_bed_with_laptop_and_books_by_Windows_on_Unsplash?width=719&height=464&fit=crop&auto=webp&dpr=4",alt:"Student on bed with laptop and books",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}})}),e.jsxs("section",{className:"max-w-7xl mx-auto flex flex-col md:flex-row gap-8 py-16 px-4",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center mb-8 md:mb-0",children:e.jsx("img",{src:"https://www.westend61.de/images/0001150575pw/confident-male-student-studying-in-library-CAVF60813.jpg",alt:"Male student studying in library",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-8 justify-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-primary-text mb-2",children:"Instant Bookings"}),e.jsx("p",{className:"text-primary-text mb-2",children:"Book a session with a tutor in just a few clicks, anytime you need help."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-primary-text mb-2",children:"No Commitments"}),e.jsx("p",{className:"text-primary-text mb-2",children:"No need to commit to a long-term course. You can book individual sessions as needed."})]})]})]}),e.jsxs("footer",{className:"bg-primary text-primary-text py-12",children:[e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8 px-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"About"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"About Us"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"How it Works"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Our Tutors"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Blog"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Location"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Help Center"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"FAQs"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Contact"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("button",{className:"hover:underline",onClick:()=>null,children:"Refund Policy"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Last Minute"}),e.jsx("p",{className:"mb-2",children:"Contact Number"}),e.jsx("p",{children:"Contact Email"})]})]}),e.jsxs("div",{className:"text-center text-gray-400 mt-8",children:["© ",e.jsx("span",{children:new Date().getFullYear()})," Last Minute by Jason Ganteng"]})]})]})},la=()=>e.jsxs("div",{className:"flex flex-col flex-1 gap-4 items-center justify-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"404 Page not found"}),e.jsx("p",{children:"The page you are looking for does not exist."})]}),e.jsx(we,{to:"/",children:e.jsx(G,{filled:!0,children:"Back to Home"})})]}),Le=a=>(console.log("Converting:",a),!a||!a.seconds?"":(console.log("Converted:",new Date(a.seconds*1e3).toLocaleString()),new Date(a.seconds*1e3).toLocaleString())),ca=a=>{const s=new Date(a);return console.log("Converting:",s),console.log("Converted:",ht.fromDate(s)),ht.fromDate(s)},da=2,ua=1,ma={courses:[],requests:[],requestCourse:async()=>Promise.resolve(),isRequestPending:!1,acceptRequest:async()=>Promise.resolve(),isAcceptPending:!1,cancelRequestCourse:async()=>Promise.resolve(),isCancelRequestPending:!1,cancelCourse:async()=>Promise.resolve(),isCancelPending:!1,loadNewerRequests:async()=>Promise.resolve()},ye=t.createContext(ma),nt=({children:a})=>{var T;const{addAlert:s}=t.useContext(le),{user:i,balance:r,updateBalance:n}=t.useContext(me),[l,f]=t.useState([]),[u,d]=t.useState([]),[m,h]=t.useState(!1),[c,g]=t.useState(!1),[b,R]=t.useState(!1),[v,F]=t.useState(!1),[P,j]=t.useState(null),D=(T=i==null?void 0:i.claims)==null?void 0:T.isTutor;t.useEffect(()=>{if(!V.currentUser)return;let A,q;return D?(A=je(be(xe(ae,"courses"),Ue("tutorId","==",V.currentUser.uid)),E=>{f(E.docs.map(B=>({id:B.id,...B.data()})))},E=>{console.error("Error fetching tutor courses:",E)}),q=je(be(xe(ae,"requests"),Ye("createdAt","desc"),gt(25)),E=>{const B=E.docs.map(_=>({id:_.id,..._.data()}));E.docs.length>0&&j(E.docs[E.docs.length-1]),B.sort((_,X)=>!_.bookingTime&&X.bookingTime?-1:_.bookingTime&&!X.bookingTime?1:!_.bookingTime&&!X.bookingTime?_.createdAt.toMillis()-X.createdAt.toMillis():_.bookingTime.toMillis()-X.bookingTime.toMillis()),d(B)},E=>{console.error("Error fetching tutor requests:",E)})):(A=je(be(xe(ae,"courses"),Ue("tuteeId","==",V.currentUser.uid)),E=>{f(E.docs.map(B=>({id:B.id,...B.data()})))},E=>{console.error("Error fetching student courses:",E)}),q=je(be(xe(ae,"requests"),Ue("tuteeId","==",V.currentUser.uid)),E=>{d(E.docs.map(B=>({id:B.id,...B.data()})))},E=>{console.error("Error fetching student requests:",E)})),()=>{A&&A(),q&&q()}},[D]);const L=async()=>{if(D){if(!P){console.warn("No more requests to load");return}try{const A=be(xe(ae,"requests"),Ye("createdAt","desc"),as(P),gt(25)),q=await rs(A);if(!q.empty){const E=q.docs.map(B=>({id:B.id,...B.data()}));d(B=>[...B,...E]),j(q.docs[q.docs.length-1])}}catch(A){console.error("Error loading older requests:",A)}}},y=async A=>{if(D){R(!0);try{const E=await Ge(Je,"acceptCourseRequest")({requestId:A.id});console.log("Request accepted successfully:",E.data),s({type:"success",title:"Success",message:"Request accepted successfully!"})}catch(q){console.error("Error accepting request:",q),s({type:"error",title:"Error accepting request",message:q.message||String(q)})}finally{R(!1)}}},S=async A=>{try{if(!A.subject||!A.topic)throw new Error("Subject and topic are required");if(A.bookingTime&&(A.bookingTime=ca(A.bookingTime),!A.bookingTime))throw new Error("Invalid booking time");if(u.some(B=>B.subject===A.subject&&B.topic===A.topic))throw new Error(`Course already requested with subject: ${A.subject} and topic: ${A.topic}`);const E=!A.bookingTime?da:ua;if(typeof r!="number"||r<E)throw new Error(`Insufficient balance. You need at least ${E} credits to book.`);h(!0),await kt(xe(ae,"requests"),{tuteeId:V.currentUser.uid,createdAt:st(),...A,price:E}),await n(-E),s({type:"success",title:"Success",message:"Course added successfully!"})}catch(q){throw s({type:"error",title:"Error requesting course",message:q.message||String(q)}),q}finally{h(!1)}},I=async A=>{try{g(!0),await pt(fe(ae,"requests",A)),console.log("Course cancelled successfully!")}catch(q){console.error("Error cancelling course:",q)}finally{g(!1)}},x=async A=>{try{F(!0),await pt(fe(ae,"courses",A)),console.log("Course cancelled successfully!")}catch(q){console.error("Error cancelling course:",q)}finally{F(!1)}},H=(A,q)=>{window.Notification&&Notification.permission==="granted"&&new Notification(A,{body:q})},J=t.useRef([]),te=t.useRef([]),z=t.useRef({});return t.useEffect(()=>{window.Notification&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),t.useEffect(()=>{if(!V.currentUser||D)return;const A=J.current,q=te.current;if(q.length>0&&A.length>0){const E=A.map(_=>_.id),B=l.find(_=>!E.includes(_.id)&&q.some(X=>X.subject===_.subject&&X.topic===X.topic));B&&H("Course Request Accepted",`Your request for ${B.subject} - ${B.topic} was accepted.`)}l.forEach(E=>{const B=A.find(_=>_.id===E.id);B&&!B.offer&&E.offer&&H("Incoming Call",`Your lecturer is calling for ${E.subject} - ${E.topic}`)}),Object.values(z.current).forEach(clearTimeout),z.current={},l.forEach(E=>{if(E.bookingTime&&E.bookingTime.toDate){const X=E.bookingTime.toDate()-new Date-5*60*1e3;X>0&&(z.current[E.id]=setTimeout(()=>{H("Upcoming Course",`Your course ${E.subject} - ${E.topic} starts in 5 minutes.`)},X))}}),J.current=l,te.current=u},[l,u,D]),e.jsx(ye.Provider,{value:{courses:l,requests:u,loadNewerRequests:L,requestCourse:S,acceptRequest:y,cancelRequestCourse:I,cancelCourse:x,isRequestPending:m,isAcceptPending:b,isCancelRequestPending:c,isCancelPending:v},children:a})};nt.propTypes={children:o.node.isRequired};const fa=(a,s)=>{const i=new Date,r=new Date(i);return r.setDate(r.getDate()+1),a.toDateString()===i.toDateString()?s("upcomingSchedule.today"):a.toDateString()===r.toDateString()?s("upcomingSchedule.tomorrow"):a.toLocaleDateString("en-US",{month:"short",day:"numeric"})},_e=({courses:a})=>{const{t:s}=ue(),i=a&&a.filter(r=>{var n;return(n=r.bookingTime)==null?void 0:n.toDate}).sort((r,n)=>r.bookingTime.toDate()-n.bookingTime.toDate()).slice(0,3);return e.jsxs(pe,{className:"w-full px-6 py-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-primary-text",children:s("upcomingSchedule.header")}),i&&i.length>0?e.jsx("ul",{className:"space-y-4",children:i.map(r=>e.jsxs("li",{className:"flex items-center gap-4 p-3 bg-background-secondary/50 rounded-md",children:[e.jsx("div",{className:"flex-shrink-0 text-center bg-card-outline p-2 rounded-md w-16",children:e.jsx("p",{className:"font-bold text-sm text-filled-button-text",children:fa(r.bookingTime.toDate(),s)})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-base text-primary-text truncate max-w-xs",title:r.topic,children:r.topic}),e.jsx("p",{className:"text-sm text-primary-text",children:r.bookingTime.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})]},r.id))}):e.jsx("p",{className:"text-sm text-center text-primary py-4",children:s("upcomingSchedule.noSessions")})]})};_e.propTypes={courses:o.arrayOf(o.shape({id:o.string,topic:o.string,bookingTime:o.shape({toDate:o.func})}))};const et=({courses:a})=>{const{t:s}=ue(),[i,r]=Ae("weekly_goal",3),n=t.useMemo(()=>{const d=new Date,m=d.getDay(),h=new Date(d);h.setDate(d.getDate()-m+(m===0?-6:1)),h.setHours(0,0,0,0);const c=new Date(h);return c.setDate(h.getDate()+6),c.setHours(23,59,59,999),a?a.filter(g=>{if(!g.done)return!1;const b=g.createdAt.toDate();return b>=h&&b<=c&&b<new Date}).length:0},[a]),l=i>0?Math.min(n/i*100,100):0,f=()=>r(d=>d+1),u=()=>r(d=>Math.max(1,d-1));return e.jsxs(pe,{className:"w-full px-6 py-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-1 text-primary-text",children:s("progressTracker.weeklyGoal")}),e.jsx("p",{className:"text-sm text-primary mb-4",children:s("progressTracker.completed",{completed:n,goal:i})}),e.jsx("div",{className:"w-full bg-background-secondary/30 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-500",style:{width:`${l}%`}})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("p",{className:"text-sm font-semibold text-primary-text",children:s("progressTracker.setGoal")}),e.jsxs("div",{className:"flex items-center gap-2 border border-card-outline rounded-md p-1 bg-input-background",children:[e.jsx("button",{onClick:u,className:"p-1 rounded hover:bg-interactive-hover",children:e.jsx("span",{className:"text-lg",children:"-"})}),e.jsx("span",{className:"font-bold text-lg text-primary-text w-6 text-center",children:i}),e.jsx("button",{onClick:f,className:"p-1 rounded hover:bg-interactive-hover",children:e.jsx("span",{className:"text-lg",children:"+"})})]})]})]})};et.propTypes={courses:o.arrayOf(o.shape({bookingTime:o.shape({toDate:o.func})}))};const It=({courses:a})=>{const{t:s}=ue(),i=Ee(),r=t.useMemo(()=>{if(!a)return[];const l=a.filter(u=>{var d;return((d=u.bookingTime)==null?void 0:d.toDate)&&u.bookingTime.toDate()<new Date}),f=new Map;return l.sort((u,d)=>d.bookingTime.toDate()-u.bookingTime.toDate()).forEach(u=>{const d=`${u.subject}-${u.topic}`;f.has(d)||f.set(d,u)}),Array.from(f.values()).slice(0,3)},[a]),n=l=>{try{console.log("Rebooking course:",l),localStorage.setItem("BookingDraft_Subject",JSON.stringify(l.subject)),localStorage.setItem("BookingDraft_Topic",JSON.stringify(l.topic)),localStorage.setItem("BookingDraft_Details",JSON.stringify(l.details||"")),localStorage.setItem("BookingDraft_Instant",JSON.stringify(!0)),i("/booking")}catch(f){console.error("Failed to save booking draft to localStorage:",f)}};return!r||r.length===0?null:e.jsx(pe,{className:"w-full px-6 py-6 shadow-sm",header:s("quickRebook.header"),footer:null,scrolling:!1,children:e.jsx("ul",{className:"space-y-3",children:r.map(l=>e.jsxs("li",{className:"flex items-center justify-between gap-4 p-3 bg-background-secondary/50 rounded-md",children:[e.jsx("div",{className:"flex items-center gap-4 min-w-0",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-base text-primary-text truncate",title:l.topic,children:l.topic}),e.jsx("p",{className:"text-sm text-primary-text truncate",title:l.subject,children:l.subject})]})}),e.jsx(G,{filled:!0,onClick:()=>n(l),children:s("quickRebook.rebookButton")})]},`rebook-${l.id}`))})})};It.propTypes={courses:o.arrayOf(o.shape({id:o.oneOfType([o.string,o.number]).isRequired,subject:o.string.isRequired,topic:o.string.isRequired,details:o.string,bookingTime:o.shape({toDate:o.func.isRequired}).isRequired})).isRequired};const ha=()=>{var c;const{t:a}=ue(),{user:s}=t.useContext(me),{courses:i}=t.useContext(ye),[r,n]=t.useState([]),[l,f]=t.useState(null),u=t.useRef(null),d=(c=s==null?void 0:s.claims)==null?void 0:c.isTutor;t.useEffect(()=>{const g=()=>{if(!i)return;const R=new Date,v=[];i.forEach(F=>{var y;if(!((y=F.bookingTime)!=null&&y.toDate))return;const j=F.bookingTime.toDate()-R,D=24*60*60*1e3,L=30*60*1e3;j>0&&j<=L?v.push({...F,reminderType:"minutes"}):j>0&&j<=D&&v.push({...F,reminderType:"day"})}),n(v)};g();const b=setInterval(g,6e4);return()=>clearInterval(b)},[i]),t.useEffect(()=>{if(!l)return;const g=b=>{u.current&&!u.current.contains(b.target)&&f(null)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[l]),o.shape({id:o.string,topic:o.string,subject:o.string,details:o.string,bookingTime:o.shape({toDate:o.func})}).isRequired,o.oneOf(["day","minutes"]).isRequired;const m=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(pe,{className:"px-6 md:px-10 py-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary-text",children:a("dashboard.myCourses","My Courses")}),e.jsx("div",{className:"divide-y divide-card-outline",children:i&&i.length>0?i.map(g=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center py-5 gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-lg text-primary-text",children:g.subject}),e.jsx("div",{className:"font-semibold text-base break-words truncate max-w-full text-primary-text",title:g.topic,children:g.topic}),e.jsx("div",{className:"mt-1 text-primary course-description truncate max-w-full",title:g.details,children:g.details||"No description"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto sm:min-w-[160px]",children:[e.jsx(G,{className:"w-full sm:w-auto",onClick:()=>f(g),children:"Chat"}),e.jsx(we,{to:{pathname:"/session",search:`course=${g.id}`},className:"w-full sm:w-auto",children:e.jsx(G,{filled:!0,className:"w-full sm:w-auto",children:"Start Session"})})]})]},g.id)):e.jsx("p",{className:"text-center text-primary py-4",children:"You have no upcoming courses. Book one from the Booking page!"})})]})}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(_e,{courses:i}),e.jsx(et,{courses:i}),e.jsx(It,{courses:i})]})]}),h=()=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(pe,{className:"px-6 md:px-10 py-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary-text",children:"Tutor Dashboard"}),e.jsx("div",{className:"divide-y divide-card-outline",children:e.jsx("div",{className:"divide-y divide-card-outline",children:i&&i.length>0?i.map(g=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center py-5 gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-lg text-primary-text",children:g.subject}),e.jsx("div",{className:"font-semibold text-base break-words truncate max-w-full text-primary-text",title:g.topic,children:g.topic}),e.jsx("div",{className:"mt-1 text-primary-text course-description truncate max-w-full",title:g.details,children:g.details||"No description"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto sm:min-w-[160px]",children:[e.jsx(G,{className:"w-full sm:w-auto",onClick:()=>f(g),children:"Chat"}),e.jsx(we,{to:{pathname:"/session",search:`course=${g.id}`},className:"w-full sm:w-auto",children:e.jsx(G,{filled:!0,className:"w-full sm:w-auto",children:"Start Session"})})]})]},g.id)):e.jsx("p",{className:"text-center text-primary py-4",children:"You have no upcoming courses. Book one from the Booking page!"})})})]})}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(_e,{courses:i}),e.jsx(et,{courses:i})]})]});return e.jsx("div",{className:"flex flex-col flex-1 min-h-screen bg-background font-[Montserrat]",children:e.jsxs("main",{className:"w-full px-6 md:px-12 pt-23 pb-6",children:[d?e.jsx(h,{}):e.jsx(m,{}),e.jsx(de,{children:l&&e.jsx($.div,{className:"fixed flex bottom-4 right-4 w-fit z-50",initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx("div",{className:"flex flex-1 h-[75vh] w-fit",ref:u,children:l&&e.jsx(rt,{courseId:l.id,courseData:l})})})})]})})},ga=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M17,10.039c-3.859,0-7,3.14-7,7,0,3.838,3.141,6.961,7,6.961s7-3.14,7-7c0-3.838-3.141-6.961-7-6.961Zm0,11.961c-2.757,0-5-2.226-5-4.961,0-2.757,2.243-5,5-5s5,2.226,5,4.961c0,2.757-2.243,5-5,5Zm1.707-4.707c.391,.391,.391,1.023,0,1.414-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293l-1-1c-.188-.188-.293-.442-.293-.707v-2c0-.552,.447-1,1-1s1,.448,1,1v1.586l.707,.707Zm5.293-10.293v2c0,.552-.447,1-1,1s-1-.448-1-1v-2c0-1.654-1.346-3-3-3H5c-1.654,0-3,1.346-3,3v1H11c.552,0,1,.448,1,1s-.448,1-1,1H2v9c0,1.654,1.346,3,3,3h4c.552,0,1,.448,1,1s-.448,1-1,1H5c-2.757,0-5-2.243-5-5V7C0,4.243,2.243,2,5,2h1V1c0-.552,.448-1,1-1s1,.448,1,1v1h8V1c0-.552,.447-1,1-1s1,.448,1,1v1h1c2.757,0,5,2.243,5,5Z"})),pa=()=>{const{t:a}=ue(),{isSmallScreen:s}=t.use(le),{requestCourse:i,isRequestPending:r}=t.use(ye),[n,l]=Ae("BookingDraft_Instant",!0),f=t.useRef(null),u=t.useRef(null),d=t.useRef(null),m=t.useRef(null),h=t.useRef(null);Me("isInstantBooking",n);const c=[{label:a("label.subject")+" - "+a("subject.math",{defaultValue:"Math"}),value:"math"},{label:a("label.subject")+" - "+a("subject.science",{defaultValue:"Science"}),value:"science"},{label:a("label.subject")+" - "+a("subject.english",{defaultValue:"English"}),value:"english"},{label:a("label.subject")+" - "+a("subject.history",{defaultValue:"History"}),value:"history"},{label:a("label.subject")+" - "+a("subject.computerScience",{defaultValue:"Computer Science"}),value:"computer-science"},{label:a("label.subject")+" - "+a("subject.art",{defaultValue:"Art"}),value:"art"},{label:a("label.subject")+" - "+a("subject.music",{defaultValue:"Music"}),value:"music"},{label:a("label.subject")+" - "+a("subject.physicalEducation",{defaultValue:"Physical Education"}),value:"physical-education"},{label:a("label.subject")+" - "+a("subject.other",{defaultValue:"Other"}),value:"other"}],g=async R=>{var j;R.preventDefault();let v=!0;if(v=await u.current.validate()&&v,v=await d.current.validate()&&v,v=await m.current.validate()&&v,h.current&&(v=await h.current.validate()&&v),!v)return;const F=new FormData(f.current),P=Object.fromEntries(F.entries());console.log("Submitting:",P);try{await i(P),u.current.reset(),d.current.reset(),m.current.reset(),(j=h.current)==null||j.reset(),l(!0)}catch(D){console.error("Booking request failed:",D)}},b=async()=>{let R=!0;R=await u.current.validate()&&R,R=await d.current.validate()&&R,R=await m.current.validate()&&R,R&&l(!1)};return e.jsx("div",{className:"flex flex-col w-full items-center justify-center",children:e.jsx(pe,{header:n?a("booking.instantBooking",{defaultValue:"Instant Booking"}):e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ie,{className:"!p-1 !size-min items-center justify-center flex aspect-square",onClick:()=>l(!0),children:e.jsx(ve,{width:32,height:32,className:"rotate-180 fill-primary-text"})}),a("booking.scheduleBooking",{defaultValue:"Schedule Booking"})]}),className:"w-[min(48rem,11/12*100%)] p-[min(3rem,4%)]",children:e.jsx("div",{className:"gap-2 ",children:e.jsx("form",{onSubmit:g,className:"focus:!ring-0",tabIndex:"0",ref:f,children:n?e.jsxs("div",{className:"flex flex-1 flex-col gap-4",children:[e.jsx(ee,{ref:u,name:"topic",label:a("label.topic",{defaultValue:"Topic"}),type:"text",disabled:r,placeholder:a("placeholder.topic",{defaultValue:"Enter the topic of the booking"}),required:!0,autoSave:"BookingDraft_Topic"}),e.jsx(ee,{ref:d,name:"subject",label:a("label.subject",{defaultValue:"Subject"}),type:"suggest",disabled:r,options:c,placeholder:a("placeholder.subject",{defaultValue:"Select a subject"}),required:!0,forceSuggestions:!0,autoSave:"BookingDraft_Subject"}),e.jsx(ee,{ref:m,name:"details",label:"Details",multiline:5,disabled:r,placeholder:a("placeholder.details",{defaultValue:"Additional details about the booking"}),autoSave:"BookingDraft_Details"}),e.jsxs("div",{className:"mt-4 w-full flex gap-2",children:[e.jsx(G,{loading:r,className:s?"":"flex-1",onClick:()=>b(),children:s?e.jsx(ga,{width:24,height:24}):a("button.scheduleBooking",{defaultValue:"Schedule Booking"})}),e.jsx(G,{loading:r,className:"flex-1",filled:!0,type:"submit",children:a("button.instantBooking",{defaultValue:"Instant Booking"})})]})]}):e.jsxs("div",{className:"flex flex-1 flex-col gap-4",children:[e.jsx(ee,{ref:u,name:"topic",type:"display",autoSave:"BookingDraft_Topic"}),e.jsx(ee,{ref:d,name:"subject",type:"display",options:c,autoSave:"BookingDraft_Subject"}),e.jsx(ee,{ref:m,name:"details",multiline:5,type:"display",autoSave:"BookingDraft_Details",className:"text-ellipsis"}),e.jsx(ee,{ref:h,min:new Date().toISOString().slice(0,16),max:new Date(Date.now()+14*24*60*60*1e3).toISOString().slice(0,16),step:900,validateFunction:R=>{if(console.log("Checking",R),new Date(R)<Date.now())throw new Error("Date and time must be in the future");if(new Date(R)>Date.now()+14*24*60*60*1e3)throw new Error("Date and time must be within the next 14 days")},name:"bookingTime",label:a("booking.dateTime",{defaultValue:"Date and Time"}),type:"datetime-local",loading:r,required:!0,autoSave:"BookingDraft_DateTime",className:"flex-1"}),e.jsx(G,{type:"submit",filled:!0,children:a("button.book",{defaultValue:"Book"})})]})})})})})},xa=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M5,20H13c2.757,0,5-2.243,5-5v-6c0-2.757-2.243-5-5-5H5C2.243,4,0,6.243,0,9v6C0,17.757,2.243,20,5,20ZM24,8.313v7.319c0,.757-.42,1.437-1.097,1.775-.283,.141-.587,.211-.889,.211-.421,0-.837-.135-1.189-.399-.037-.028-.825-.81-.825-.81V7.544s.786-.789,.825-.818c.604-.454,1.399-.527,2.078-.188s1.097,1.018,1.097,1.775Z"})),wa=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M23.707,22.293l-5.921-5.921c.128-.445,.214-.901,.214-1.372v-6c0-2.757-2.243-5-5-5H5.414L1.708,.293C1.317-.098,.684-.098,.293,.293S-.097,1.316,.293,1.707l4,4h0L22.293,23.707c.195,.195,.451,.293,.707,.293s.512-.098,.707-.293c.391-.391,.391-1.023,0-1.414Zm-8.489-2.833c-.671,.335-1.417,.54-2.218,.54H5C2.239,20,0,17.761,0,15v-6C0,7.678,.52,6.486,1.351,5.593l13.866,13.867Zm8.782-11.147v7.319c0,.757-.42,1.437-1.097,1.775-.283,.141-.587,.211-.889,.211-.421,0-.837-.135-1.189-.399-.037-.028-.825-.81-.825-.81V7.544s.786-.789,.825-.818c.604-.454,1.399-.527,2.078-.188s1.097,1.018,1.097,1.775Z"})),ya=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Filled",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M10,12a1,1,0,0,1-1,1H4.069a7.993,7.993,0,0,0,15.862,0H15a1,1,0,0,1,0-2h5V9H15a1,1,0,0,1,0-2h4.931A7.993,7.993,0,0,0,4.069,7H9A1,1,0,0,1,9,9H4v2H9A1,1,0,0,1,10,12Z"}),t.createElement("path",{d:"M23,12a1,1,0,0,0-1,1,9.01,9.01,0,0,1-9,9H11a9.011,9.011,0,0,1-9-9,1,1,0,0,0-2,0A11.013,11.013,0,0,0,11,24h2A11.013,11.013,0,0,0,24,13,1,1,0,0,0,23,12Z"})),ba=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"m21.154,19.74c1.833-2.165,2.846-4.883,2.846-7.74,0-.552-.448-1-1-1s-1,.448-1,1c0,2.324-.804,4.54-2.263,6.323l-1.421-1.421c.883-1.134,1.422-2.477,1.601-3.902h-3.917c-.552,0-1-.448-1-1s.448-1,1-1h4v-2h-4c-.552,0-1-.448-1-1s.448-1,1-1h3.931c-.495-3.94-3.859-7-7.931-7-2.819,0-5.355,1.456-6.795,3.791L1.707.293C1.316-.098.684-.098.293.293S-.098,1.316.293,1.707l22,22c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023,0-1.414l-2.553-2.553Zm-4.982,1.352c-1.312.603-2.715.909-4.171.909-5.514,0-10-4.486-10-10,0-.552-.448-1-1-1s-1,.448-1,1c0,6.617,5.383,12,12,12,1.747,0,3.431-.367,5.006-1.091.502-.231.722-.825.491-1.326-.23-.502-.825-.723-1.326-.491Zm-1.047-1.725c-.96.408-2.016.634-3.124.634-4.418,0-8-3.582-8-8v-3.758l11.124,11.124Z"})),va=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",...a},t.createElement("path",{d:"M8.151,15c.983,0,1.92,.359,2.646,1h2.404c.726-.641,1.664-1,2.646-1h5.151c.344,0,.677,.043,1,.11V7.5c0-2.485-2.015-4.5-4.5-4.5H6.5c-2.485,0-4.5,2.015-4.5,4.5v7.61c.323-.067,.656-.11,1-.11h5.151Zm.186-6.663l2.256-2.256c.775-.775,2.038-.775,2.812,0l2.257,2.257c.391,.391,.391,1.023,0,1.414-.195,.195-.451,.293-.707,.293s-.512-.098-.707-.293l-1.249-1.249v3.497c0,.552-.448,1-1,1s-1-.448-1-1v-3.506l-1.249,1.257c-.391,.391-1.023,.391-1.414,0s-.391-1.023,0-1.414Zm15.663,10.663c0,1.105-.895,2-2,2H2c-1.105,0-2-.895-2-2s.895-2,2-2h6.921c.471,0,.918,.207,1.222,.567l.197,.233h3.319l.198-.234c.304-.359,.751-.566,1.221-.566h6.922c1.105,0,2,.895,2,2Z"})),ja=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",width:512,height:512,...a},t.createElement("path",{d:"M23,11a1,1,0,0,1-1-1,8.008,8.008,0,0,0-8-8,1,1,0,0,1,0-2A10.011,10.011,0,0,1,24,10,1,1,0,0,1,23,11Zm-3-1a6,6,0,0,0-6-6,1,1,0,1,0,0,2,4,4,0,0,1,4,4,1,1,0,0,0,2,0Zm2.183,12.164.91-1.049a3.1,3.1,0,0,0,0-4.377c-.031-.031-2.437-1.882-2.437-1.882a3.1,3.1,0,0,0-4.281.006l-1.906,1.606A12.784,12.784,0,0,1,7.537,9.524l1.6-1.9a3.1,3.1,0,0,0,.007-4.282S7.291.939,7.26.908A3.082,3.082,0,0,0,2.934.862l-1.15,1C-5.01,9.744,9.62,24.261,17.762,24A6.155,6.155,0,0,0,22.183,22.164Z"})),Na=a=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 24 24",...a},t.createElement("path",{d:"m24,15c0,.617-.24,1.197-.678,1.634l-2.072,2.073c-.195.195-.451.293-.707.293s-.512-.098-.707-.293c-.391-.391-.391-1.023,0-1.414l1.292-1.293h-6.128c-.553,0-1-.447-1-1s.447-1,1-1h6.128l-1.292-1.293c-.391-.391-.391-1.023,0-1.414s1.023-.391,1.414,0l2.073,2.074c.437.436.677,1.016.677,1.633Zm-10-4v-5c0-1.103-.897-2-2-2h0s0,0,0,0v17.999h1c.552,0,1-.448,1-1v-2c0-.553.447-1,1-1s1,.447,1,1v2c0,1.654-1.346,3-3,3H3c-1.654,0-3-1.346-3-3V5.621C0,3.246,1.69,1.184,4.019.718L7.216.079c1.181-.236,2.391.066,3.321.829.375.307.665.685.902,1.092h.561c2.206,0,4,1.794,4,4v5c0,.553-.447,1-1,1s-1-.447-1-1Zm-5,1.5c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5,1.5.672,1.5,1.5,1.5,1.5-.672,1.5-1.5Z"})),tt=({children:a})=>e.jsx("div",{className:"bg-background p-2 rounded-md",children:a});tt.propTypes={children:o.node.isRequired};const Lt=({courseId:a,onEndCall:s})=>{const{courses:i}=t.useContext(ye),{user:r}=t.useContext(me),n=i.find(w=>w.id===a),[l,f]=t.useState([]),[u,d]=t.useState([]),[m,h]=t.useState([]),c=t.useRef(),[g,b]=t.useState(!1);Me("isVideoStreaming",g);const[R,v]=t.useState(!1),[F,P]=t.useState(!1),[j,D]=t.useState(!1),[L,y]=t.useState(!1),[S,I]=t.useState(!1),x=t.useRef(null),H=t.useRef(null),J=t.useRef(null),te=t.useRef(null),z=t.useRef(null),[T,A]=t.useState("default"),[q,E]=t.useState("default"),[B,_]=t.useState("default"),[X,M]=t.useState(!1),O=()=>{if(c.current)return c.current;const w=new MediaStream;return te.current&&(te.current.srcObject=w),c.current=w,c.current},p=t.useCallback(async()=>{try{const w=await navigator.mediaDevices.enumerateDevices();f(w.filter(C=>C.kind==="videoinput")),d(w.filter(C=>C.kind==="audioinput")),h(w.filter(C=>C.kind==="audiooutput"))}catch(w){console.error("Error enumerating devices:",w)}},[]);t.useEffect(()=>{l.length,u.length||ke(F)},[l,u]),t.useEffect(()=>{p();const w=()=>p();return navigator.mediaDevices.addEventListener("devicechange",w),()=>{navigator.mediaDevices.removeEventListener("devicechange",w)}},[p]);const k=t.useCallback(()=>{c.current&&(c.current.getTracks().forEach(w=>w.stop()),te.current&&(te.current.srcObject=null),c.current=null)},[]);t.useEffect(()=>()=>{k()},[k]);const Q=async w=>{if(!x.current||!H.current)throw new Error("No active connection or video sender available");try{console.log("Replacing video track:",w),await H.current.replaceTrack(w),console.log("Video track replaced successfully")}catch(C){throw new Error(`Error replacing video track: ${C.message}`)}},oe=async w=>{if(console.log("Replacing audio track"),!x.current||!J.current)throw new Error("No active connection or audio sender available");try{console.log("Replacing audio track:",w),await J.current.replaceTrack(w),console.log("Audio track replaced successfully")}catch(C){throw new Error(`Error replacing audio track: ${C}`)}},ne=async()=>{var w,C,K;try{if(c.current||O(),L)try{(((w=c.current)==null?void 0:w.getVideoTracks())||[]).forEach(Y=>{Y._interval&&clearInterval(Y._interval),Y._canvas&&Y._canvas.remove(),console.log("Removing existing video track:",Y),c.current.removeTrack(Y),Y.stop()}),(await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",frameRate:24,resizeMode:"none"},audio:!1})).getVideoTracks().forEach(Y=>{console.log("Adding screen sharing track:",Y),c.current.addTrack(Y),Y.onended=()=>{y(!1)}})}catch(Z){throw y(!1),Z}else g?((((C=c.current)==null?void 0:C.getVideoTracks())||[]).forEach(Y=>{Y._interval&&clearInterval(Y._interval),Y._canvas&&Y._canvas.remove(),console.log("Removing existing video track:",Y),c.current.removeTrack(Y),Y.stop()}),(await navigator.mediaDevices.getUserMedia({video:{deviceId:T,width:{ideal:1280,max:2560},height:{ideal:720,max:1440},frameRate:{min:8,max:24},resizeMode:"none"}})).getVideoTracks().forEach(Y=>{console.log("Adding camera track:",Y),c.current.addTrack(Y)})):((((K=c.current)==null?void 0:K.getVideoTracks())||[]).forEach(W=>{c.current.removeTrack(W),W.stop()}),Fe());if(x.current&&H.current){const Z=c.current.getVideoTracks()[0];console.log("New video track:",Z),Z&&await Q(Z)}}catch(Z){if(console.error("Error updating video tracks:",Z),Fe(),x.current&&H.current){const W=c.current.getVideoTracks()[0];W&&await Q(W)}b(!1)}finally{v(!1),I(!1)}};t.useEffect(()=>{ne()},[g,L,T]);const ke=async w=>{if(!(!c.current||j))try{if(D(!0),console.log("Testing microphone:",q),console.log("Audio streaming state:",w),w===!0&&await Re(),(c.current.getAudioTracks()||[]).forEach(K=>{c.current.removeTrack(K),K.stop()}),w===!0?(await navigator.mediaDevices.getUserMedia({audio:{deviceId:q,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getAudioTracks().forEach(Z=>{Z.enabled=!0,console.log("Adding audio track:",Z),c.current.addTrack(Z)}):ce(),x.current&&J.current){const K=c.current.getAudioTracks()[0];K&&await oe(K)}P(w)}catch(C){if(console.error("Error updating audio tracks:",C),ce(),x.current&&J.current){const K=c.current.getAudioTracks()[0];K&&await oe(K)}P(!1)}finally{D(!1)}},Re=async()=>{const w=new(window.AudioContext||window.webkitAudioContext),C=w.createAnalyser();C.fftSize=256;const K=await navigator.mediaDevices.getUserMedia({audio:{deviceId:q}}),Z=w.createMediaStreamSource(K);try{Z.connect(C);const W=new Uint8Array(C.frequencyBinCount);let Y=!1,he=!1;if(await new Promise(ct=>{const Vt=setInterval(()=>{if(he)return;C.getByteFrequencyData(W),W.some(Ft=>Ft>10)&&(Y=!0,he=!0,ct())},100);setTimeout(()=>{he||(he=!0,clearInterval(Vt),ct())},5e3)}),!Y)throw console.error("No sound detected from the microphone. Cleaning up..."),new Error("No sound detected from the microphone");return}finally{K.getTracks().forEach(W=>W.stop()),w.suspend(),w.close(),C.disconnect(),Z.disconnect()}},Ve=async()=>{if(!l.length){console.error("No camera detected.");return}!g&&!F&&v(!0),y(!1),b(!g)},Ce=async()=>{if(!u.length){console.error("No audio input detected");return}await ke(!F)},N=async()=>{L||I(!0),b(!1),y(!L)},U={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],iceCandidatePoolSize:10},se=()=>{console.log("Creating peer connection...");const w=new RTCPeerConnection(U);return console.log("Peer connection created:",w),x.current=w,x.current.oniceconnectionstatechange=()=>{x.current.iceConnectionState==="disconnected"?console.log("Disconnected from peer"):x.current.iceConnectionState==="connected"?console.log("Connected to peer"):x.current.iceConnectionState==="failed"&&console.error("Connection failed")},x.current.ontrack=C=>{console.log("Remote track received:",C.track.kind);const K=C.streams[0];z.current&&(console.log("Setting remote stream to video element"),z.current.srcObject=K),K.getTracks().forEach(Z=>{console.log("Remote track details:",Z.kind,Z.enabled,Z.muted),Z.onended=()=>{console.log("Remote track ended")}})},console.log("Peer connection listeners set up"),x.current},ce=()=>{const w=new(window.AudioContext||window.webkitAudioContext),C=w.createOscillator();C.type="sine",C.frequency.setValueAtTime(440,w.currentTime);const K=w.createMediaStreamDestination();C.connect(K),C.start();const Z=K.stream.getAudioTracks()[0];Z.enabled=!1,c.current.addTrack(Z),console.log("Dummy audio track created and added to stream:",Z)},Fe=()=>{const w=document.createElement("canvas");w.width=1280,w.height=720;const C=w.getContext("2d");C.fillStyle="grey",C.fillRect(0,0,w.width,w.height),C.fillStyle="white",C.font="40px Arial";const K=r.displayName||"Anonymous",Z=C.measureText(K).width;C.fillText(K,(w.width-Z)/2,w.height/2);const W=setInterval(()=>{const lt=new Date;C.clearRect(0,w.height-40,w.width,40),C.fillStyle="grey",C.fillRect(0,w.height-40,w.width,40),C.fillStyle="white",C.font="20px Arial",C.fillText(lt.toLocaleTimeString(),20,w.height-15)},1e3),he=w.captureStream(8).getVideoTracks()[0];return he._canvas=w,he._interval=W,he.onended=()=>{clearInterval(W)},c.current.addTrack(he),console.log("Dummy video track created and added to stream:",he),he},it=async()=>{if(c.current||O(),c.current.getTracks().length<2&&(console.warn("Not enough tracks in stream. Creating dummy audio or video track..."),c.current.getAudioTracks().length===0&&ce(),c.current.getVideoTracks().length===0&&Fe(),await new Promise(w=>{const C=()=>{c.current&&c.current.getTracks().length>0?(console.log("Tracks acquired successfully:",c.current.getTracks()),w()):setTimeout(C,500)};C(),setTimeout(()=>w(),1e4)})),!c.current.getTracks().length)throw new Error("Failed to acquire tracks");console.log("Tracks acquired successfully:",c.current.getTracks())},qt=async()=>{try{if(console.log("Making call..."),se(),!x.current)throw console.error("Failed to create peer connection"),new Error("Failed to create peer connection");if(x.current.addTransceiver("video",{direction:"recvonly"}),x.current.addTransceiver("audio",{direction:"recvonly"}),await it(),M(!0),console.log("Adding local stream to peer connection:",c.current),c.current.getTracks().forEach(Z=>{console.log("Adding track:",Z);const W=x.current.addTrack(Z,c.current);Z.kind==="video"&&(H.current=W,console.log("Video sender added:",W)),Z.kind==="audio"&&(J.current=W,console.log("Audio sender added:",W))}),console.log("Video and audio senders added:",{videoSender:H.current,audioSender:J.current}),!H.current||!J.current)throw new Error("Failed to add video or audio sender");console.log("Local stream added to peer connection");let w=[];x.current.onicecandidate=async Z=>{Z.candidate&&(console.log("ICE candidate:",Z.candidate),w.push(Z.candidate))},console.log("ICE candidates listener set up");const C=await x.current.createOffer();if(await x.current.setLocalDescription(C),console.log("Local description set with offer"),await ot(w),!w.length)throw console.error("No ICE candidates found"),new Error("No ICE candidates found");if(console.log(x.current.localDescription),!x.current.localDescription.sdp.includes("a=candidate:"))throw console.error("No ICE candidates found in local description"),new Error("No ICE candidates found in local description");console.log("ICE candidates found in local description");const K={type:x.current.localDescription.type,sdp:x.current.localDescription.sdp};console.log("Serialized offer:",K),await Se(fe(ae,"courses",a),{offer:K},{merge:!0}),console.log("Offer sent successfully")}catch(w){console.error("Error making call:",w)}finally{M(!1)}},Mt=async()=>{var w;try{if(console.log("Answering call..."),se(),!x.current)throw console.error("Failed to create peer connection"),new Error("No peer connection available");if(!(n!=null&&n.offer))throw console.error("No offer available to answer"),new Error("No offer available to answer");if(await it(),M(!0),console.log("Adding local stream to peer connection:",c.current),c.current.getTracks().forEach(W=>{console.log("Adding track:",W);const Y=x.current.addTrack(W,c.current);W.kind==="video"&&(H.current=Y,console.log("Video sender added:",Y)),W.kind==="audio"&&(J.current=Y,console.log("Audio sender added:",Y))}),!H.current||!J.current)throw new Error("Failed to add video or audio sender");console.log("Video and audio senders added:",{videoSender:H.current,audioSender:J.current}),console.log("Local stream added to peer connection"),await((w=x.current)==null?void 0:w.setRemoteDescription(new RTCSessionDescription(n.offer))),console.log("Remote description set from offer");let C=[];x.current.onicecandidate=async W=>{W.candidate&&(console.log("ICE candidate:",W.candidate),C.push(W.candidate))},console.log("ICE candidates listener set up");const K=await x.current.createAnswer();if(await x.current.setLocalDescription(K),console.log("Local description set with answer"),await ot(C),!C.length)throw console.error("No ICE candidates found"),new Error("No ICE candidates found");if(!x.current.localDescription.sdp.includes("a=candidate:"))throw console.error("No ICE candidates found in local description"),new Error("No ICE candidates found in local description");console.log("ICE candidates found in local description");const Z={type:x.current.localDescription.type,sdp:x.current.localDescription.sdp};console.log("Serialized answer:",Z),await Se(fe(ae,"courses",a),{answer:Z},{merge:!0}),console.log("Answer sent successfully")}catch(C){console.error("Error answering call:",C)}finally{M(!1)}};t.useEffect(()=>{r!=null&&r.claims.isTutor&&(n!=null&&n.answer)&&(async()=>{if(r!=null&&r.claims.isTutor&&(n!=null&&n.answer)&&x.current&&x.current.signalingState==="have-local-offer")try{await x.current.setRemoteDescription(new RTCSessionDescription(n.answer)),console.log("Remote answer set successfully")}catch(C){console.error("Failed to set remote answer:",C)}})()},[n==null?void 0:n.answer,r==null?void 0:r.claims.isTutor]);const ot=(w,C=5e3)=>new Promise((K,Z)=>{let W=!1;x.current.onicegatheringstatechange=()=>{W||(x.current.iceGatheringState==="complete"?(console.log("ICE gathering complete"),console.log("ICE candidates:",w),W=!0,K()):console.log("ICE gathering state:",x.current.iceGatheringState))};const Y=setTimeout(()=>{W||(W=!0,console.warn(`ICE gathering timed out after ${C}ms`),w.length>0?(console.log("Proceeding with available candidates:",w.length),K()):Z(new Error("ICE gathering timed out with no candidates")))},C);x.current.addEventListener("icegatheringstatechange",()=>{x.current.iceGatheringState==="complete"&&clearTimeout(Y)},{once:!0})}),Bt=async()=>{await s(),x.current&&(x.current.close(),x.current=null,console.log("Peer connection closed")),H.current=null,J.current=null,z.current&&(z.current.srcObject=null),await Se(fe(ae,"courses",a),{offer:null,answer:null},{merge:!0})};return e.jsxs("div",{className:" flex-1 h-full w-full relative flex flex-col justify-center items-center min-w-fit",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap gap-4 absolute justify-center items-center w-full p-8 min-w-fit",children:[e.jsx("video",{ref:te,id:"localVideo",autoPlay:!0,playsInline:!0,muted:!0,className:"flex rounded-lg min-w-96 w-135 xl:w-[45%] aspect-video h-auto"}),e.jsx("video",{ref:z,id:"remoteVideo",autoPlay:!0,playsInline:!0,className:"flex rounded-lg min-w-96 w-135 xl:w-[45%] aspect-video h-auto"})]}),e.jsxs("div",{className:"absolute bottom-0 flex gap-1 bg-[#faf9f5] p-2 rounded-lg min-w-fit max-w-11/12",children:[e.jsx(G,{onClick:()=>Ce(),loading:j,popup:e.jsx(tt,{children:"Sup"}),className:"flex !bg-background-secondary/10 !border-none transition-none",children:F?e.jsx(ya,{className:" w-6 h-6 fill-primary"}):e.jsx(ba,{className:"w-6 h-6 fill-primary"})}),e.jsx(G,{onClick:()=>Ve(),loading:R,popup:e.jsx(tt,{}),className:"flex !bg-background-secondary/10 !border-none transition-none",children:g?e.jsx(xa,{className:" w-6 h-6 fill-primary"}):e.jsx(wa,{className:"w-6 h-6 fill-primary"})}),e.jsx("div",{className:"flex-1 mx-2 min-w-[1px] bg-primary/40"}),e.jsx(ie,{onClick:()=>N(),loading:S,className:`${L&&!S?"!bg-primary":"!bg-background-secondary/10"} !p-2 items-center justify-center flex active:!bg-primary/25`,children:e.jsx(va,{className:`${L&&!S?"animate-pulse fill-success":"fill-primary"} w-6 h-6`})}),e.jsx("div",{className:"flex-1 mx-2 min-w-[1px] bg-primary/40"}),e.jsx(G,{onClick:()=>r!=null&&r.claims.isTutor&&(n!=null&&n.offer)||n!=null&&n.answer?Bt():r!=null&&r.claims.isTutor?qt():Mt(),disabled:!(r!=null&&r.claims.isTutor)&&!(n!=null&&n.offer),loading:X,className:`${r!=null&&r.claims.isTutor&&(n!=null&&n.offer)||!(r!=null&&r.claims.isTutor)&&(n!=null&&n.answer)?"!bg-red-500":"!bg-green-500"} flex !p-2 !border-none transition-none`,children:r!=null&&r.claims.isTutor&&(n!=null&&n.offer)||!(r!=null&&r.claims.isTutor)&&(n!=null&&n.answer)?e.jsx(Na,{className:" w-6 h-6 fill-white"}):e.jsx(ja,{className:"w-6 h-6 fill-white"})})]})]})};Lt.propTypes={courseId:o.string.isRequired,onEndCall:o.func.isRequired};const ka=()=>{const{user:a}=t.useContext(me),{isSmallScreen:s,addAlert:i}=t.useContext(le),{courses:r}=t.useContext(ye),[n,l]=t.useState(null),{search:f}=at(),u=new URLSearchParams(f).get("course");t.useEffect(()=>{if(!u)return;const m=r.find(h=>h.id===u);if(m){l(m);return}},[u,r]);const d=async()=>{var m;if(u&&(m=a==null?void 0:a.claims)!=null&&m.isTutor){i({type:"info",title:"End Session",message:"Are you sure you want to end this session?",cancelButton:!0,okayButton:!0,primary:"cancel",onCancel:()=>{},onOkay:async()=>{var h,c;try{console.log("Ending session for course:",u);const g=fe(ae,"courses",u);await We(g,{done:!0,doneAt:st()});const b=await ns(g);if(b.exists()){const R=b.data(),v=R.price||0,F=R.tutorId;if(F&&v>0){const P=fe(ae,"balance",F);await We(P,{money:(c=(h=window.firebase)==null?void 0:h.firestore)!=null&&c.FieldValue?window.firebase.firestore.FieldValue.increment(v):Nt(v)})}}}catch(g){console.error("Failed to end session:",g),i({type:"error",title:"Error",message:"Failed to end session. Please try again."})}}});return}};return e.jsxs("div",{style:{marginTop:Be},className:"w-full flex flex-row flex-wrap justify-center",children:[e.jsx("div",{className:"flex-1 flex justify-center p-4 top-30 items-center bg-black rounded-xl min-w-96 w-full min-h-full",children:e.jsx(Lt,{courseId:u,onEndCall:d})}),e.jsx("div",{className:" min-h-11/12 flex",children:e.jsx(rt,{courseId:u,courseData:n})})]})},Ca=["image/jpeg","image/png","image/webp"],Sa=()=>{var J,te;const{addAlert:a}=t.useContext(le),{user:s,updateUserProfile:i,isAuthLoading:r,changePassword:n,sendResetPassword:l}=t.useContext(me),f=Ee(),u=t.useRef(null),d=t.useRef(null),m=t.useRef(null),h=t.useRef(null),[c,g]=t.useState({firstName:((J=s==null?void 0:s.displayName)==null?void 0:J.split(" ")[0])||"",lastName:((te=s==null?void 0:s.displayName)==null?void 0:te.split(" ").slice(1).join(" "))||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",profilePicture:(s==null?void 0:s.photoURL)||null,profilePictureFile:null}),[b,R]=t.useState(!1),[v,F]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[P,j]=t.useState(!1);t.useEffect(()=>{var z,T;g({firstName:((z=s==null?void 0:s.displayName)==null?void 0:z.split(" ")[0])||"",lastName:((T=s==null?void 0:s.displayName)==null?void 0:T.split(" ").slice(1).join(" "))||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",profilePicture:(s==null?void 0:s.photoURL)||null,profilePictureFile:null})},[s]);const D=z=>{const{name:T,value:A}=z.target;g(q=>({...q,[T]:A}))},L=async z=>{z.preventDefault(),R(!0);try{let T=!0;if(u.current&&(T=await u.current.validate()&&T),d.current&&(T=await d.current.validate()&&T),m.current&&(T=await m.current.validate()&&T),h.current&&(T=await h.current.validate()&&T),!T){a({type:"error",title:"Invalid Input",message:"Please check your input fields."}),R(!1);return}const A=`${c.firstName} ${c.lastName}`.trim();await i({displayName:A,email:c.email,phoneNumber:c.phoneNumber,profilePictureFile:c.profilePictureFile}),a({type:"success",title:"Profile Updated",message:"Your profile has been updated."})}catch(T){a({type:"error",title:"Update Failed",message:T.message||"Failed to update profile."})}finally{R(!1)}},y=()=>{var z,T;g({firstName:((z=s==null?void 0:s.displayName)==null?void 0:z.split(" ")[0])||"",lastName:((T=s==null?void 0:s.displayName)==null?void 0:T.split(" ").slice(1).join(" "))||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",profilePicture:(s==null?void 0:s.photoURL)||null,profilePictureFile:null})},S=z=>{const T=z.target.files[0];if(T){if(!Ca.includes(T.type)){a({type:"error",title:"Invalid File",message:"Only JPG, PNG, or WEBP images are allowed."});return}const A=new window.FileReader;A.onload=q=>{const E=new window.Image;E.onload=()=>{const B=document.createElement("canvas");B.width=150,B.height=150,B.getContext("2d").drawImage(E,0,0,150,150),B.toBlob(X=>{if(X){const M=new File([X],T.name,{type:T.type});g(O=>({...O,profilePicture:URL.createObjectURL(X),profilePictureFile:M}))}},T.type)},E.src=q.target.result},A.readAsDataURL(T),g(q=>({...q,profilePictureFile:T}))}},I=z=>{const{name:T,value:A}=z.target;F(q=>({...q,[T]:A}))},x=async z=>{z.preventDefault(),j(!0);try{if(!v.currentPassword||!v.newPassword){a({type:"error",title:"Missing Fields",message:"Please fill in all password fields."}),j(!1);return}if(v.newPassword!==v.confirmPassword){a({type:"error",title:"Password Mismatch",message:"New passwords do not match."}),j(!1);return}const T=await n(v.currentPassword,v.newPassword);T==="success"?F({currentPassword:"",newPassword:"",confirmPassword:""}):T==="reauth-required"&&(await Ne(V),f("/auth"))}finally{j(!1)}},H=async()=>{await l()};return e.jsxs("form",{className:"bg-card-background rounded-xl box-border border-2 border-card-outline shadow p-6 flex flex-col gap-6 min-w-fit",onSubmit:L,children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text mb-6",children:"Edit Profile"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-white overflow-hidden mb-2 relative",children:c.profilePicture?e.jsx("img",{src:c.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:Xe,alt:"👤"})})}),e.jsxs("div",{className:"inline-block px-4 py-2",children:[e.jsx("input",{id:"profilePicture",type:"file",accept:"image/jpeg,image/png,image/webp",style:{display:"none"},onChange:S}),e.jsx(G,{type:"button",onClick:()=>document.getElementById("profilePicture").click(),disabled:b||r,children:"Change"})]})]}),e.jsxs("div",{className:"flex gap-3 flex-row",children:[e.jsx(ee,{name:"firstName",label:"First Name",value:c.firstName,placeholder:"First Name",type:"text",className:"flex-1",onChange:D,ref:u,required:!0,autoComplete:"given-name"}),e.jsx(ee,{name:"lastName",label:"Last Name",value:c.lastName,placeholder:"Last Name",type:"text",className:"flex-1",onChange:D,ref:d,required:!0,autoComplete:"family-name"})]}),e.jsx("div",{className:"",children:e.jsx(ee,{name:"email",label:"Email",value:c.email,placeholder:"Email",type:"email",onChange:D,ref:m,required:!0,autoComplete:"email"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-text mb-2",children:"Change Password"}),e.jsxs("form",{className:"flex flex-col gap-3",onSubmit:x,children:[e.jsx(ee,{name:"currentPassword",label:"Current Password",type:"password",value:v.currentPassword,onChange:I,required:!0,autoComplete:"current-password"}),e.jsx(ee,{name:"newPassword",label:"New Password",type:"password",value:v.newPassword,onChange:I,required:!0,autoComplete:"new-password"}),e.jsx(ee,{name:"confirmPassword",label:"Confirm New Password",type:"password",value:v.confirmPassword,onChange:I,required:!0,autoComplete:"new-password"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(G,{type:"button",onClick:H,disabled:P||r,children:"Reset Password"}),e.jsx(G,{type:"submit",filled:!0,loading:P||r,children:"Change Password"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(G,{type:"button",onClick:y,disabled:b||r,children:"Reset"}),e.jsx(G,{type:"submit",filled:!0,loading:b||r,children:"Save"})]})]})},Aa=()=>{const a=Ee(),{deleteAccount:s,changePassword:i,sendResetPassword:r}=t.useContext(me),[n]=t.useState({password:"",dob:""}),l=t.useRef(null),f=t.useRef(null),u=t.useRef(null),[d,m]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[h,c]=t.useState(!1),g=[{complete:!1,text:"At least 8 characters",regEx:".{8,}"},{complete:!1,text:"At least one uppercase letter",regEx:"(?=.*[A-Z])"},{complete:!1,text:"At least one lowercase letter",regEx:"(?=.*[a-z])"},{complete:!1,text:"At least one number",regEx:"(?=.*[0-9])"}],[b,R]=t.useState([]),v=y=>{let S=[...g];if(S.forEach(I=>{I.complete=new RegExp(I.regEx).test(y)}),R(S),!S.every(I=>I.complete))throw new Error("Password does not meet all requirements")},F=t.useCallback(async()=>{try{await Ne(V),console.log("Signed out successfully!"),a("/")}catch(y){console.error("Error signing out:",y)}},[a]),P=t.useCallback(async()=>{const y=await s();y==="success"?a("/"):y==="reauth-required"&&(await Ne(V),a("/auth"))},[s,a]),j=y=>{const{name:S,value:I}=y.target;m(x=>({...x,[S]:I}))},D=async y=>{y.preventDefault(),c(!0);try{let S=!0;if(l.current&&(S=await l.current.validate()&&S),f.current&&(S=await f.current.validate()&&S),u.current&&(S=await u.current.validate()&&S),!S){window.alert("Please check your password fields."),c(!1);return}if(d.newPassword!==d.confirmPassword){window.alert("New passwords do not match."),c(!1);return}const I=await i(d.currentPassword,d.newPassword);I==="success"?m({currentPassword:"",newPassword:"",confirmPassword:""}):I==="reauth-required"&&(await Ne(V),a("/auth"))}finally{c(!1)}},L=async()=>{await r()};return e.jsxs("div",{className:"p-4 bg-card-background rounded-xl box-border border-2 border-card-outline flex flex-col gap-6 min-w-fit",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Personal Information"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-text mb-2",children:"Change Password"}),e.jsxs("form",{className:"flex flex-col gap-5",onSubmit:D,children:[e.jsx(ee,{name:"currentPassword",label:"Current Password",type:"password",value:d.currentPassword,onChange:j,ref:l,required:!0,autoComplete:"current-password",placeholder:"Enter your current password"}),e.jsx(ee,{name:"newPassword",label:"New Password",type:"password",value:d.newPassword,onChange:j,ref:f,required:!0,autoComplete:"new-password",placeholder:"Enter a new password",validateFunction:v,requirements:b}),e.jsx(ee,{name:"confirmPassword",label:"Confirm New Password",type:"password",value:d.confirmPassword,onChange:j,ref:u,required:!0,autoComplete:"new-password",placeholder:"Re-enter new password",validateFunction:y=>{if(y!==d.newPassword)throw new Error("Passwords do not match")}}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(G,{type:"button",onClick:L,disabled:h,children:"Reset Password"}),e.jsx(G,{type:"submit",filled:!0,loading:h,children:"Change Password"})]})]})]}),e.jsx("h2",{className:"text-2xl font-bold text-primary-text",children:"Account Management"}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-lg font-bold text-primary-text mb-4",children:"Sign Out"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-primary-text mb-2",children:"Sign out of your current account"}),e.jsx(G,{onClick:()=>F(),children:"Sign Out"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-primary-text mb-4",children:"Delete Account"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-text mb-2",children:"Permanently delete your account and all its data"}),e.jsx(G,{onClick:()=>P(),children:"Delete"})]})]})]})},Ea=()=>{const{selectedTheme:a,setSelectedTheme:s}=t.useContext(le),i=[{key:"default",label:"Default",colorClass:"bg-yellow-50",border:"border-card-outline",checkColor:"text-card-outline"},{key:"dark",label:"Dark",colorClass:"bg-neutral-700",border:"border-white",checkColor:"text-white"},{key:"blue",label:"Blue",colorClass:"bg-blue-400",border:"border-blue-700",checkColor:"text-blue-700"},{key:"green",label:"Green",colorClass:"bg-green-300",border:"border-green-700",checkColor:"text-green-700"},{key:"pink",label:"Pink",colorClass:"bg-pink-200",border:"border-pink-600",checkColor:"text-pink-600"},{key:"purple",label:"Purple",colorClass:"bg-purple-300",border:"border-purple-700",checkColor:"text-purple-700"},{key:"orange",label:"Orange",colorClass:"bg-orange-300",border:"border-orange-700",checkColor:"text-orange-700"}];return e.jsxs("div",{className:"bg-card rounded-xl box-border border-2 border-card-outline shadow p-6 min-w-fit",children:[e.jsx("p",{className:"text-sm text-primary-text mb-2",children:"Customize the color of your interface to your liking"}),e.jsx("div",{className:"flex items-center space-x-4 flex-wrap",children:i.map(r=>e.jsxs("div",{onClick:()=>s(r.key),className:`w-12 h-12 rounded-full flex items-center justify-center ${r.colorClass} border-2 ${a===r.key?r.border:"border-transparent"} cursor-pointer transition-all duration-200 mb-2`,children:[a===r.key&&e.jsx("span",{className:`${r.checkColor} text-lg`,children:"✓"}),e.jsx("span",{className:"sr-only",children:r.label})]},r.key))})]})},Ta=a=>t.createElement("svg",{id:"Layer_1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",...a},t.createElement("path",{d:"m20 16c0 .828-.672 1.5-1.5 1.5s-1.5-.672-1.5-1.5.672-1.5 1.5-1.5 1.5.672 1.5 1.5zm-10.5-13c-.828 0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5 1.5-.672 1.5-1.5-.672-1.5-1.5-1.5zm10 3c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm4.5-2v17c0 1.654-1.346 3-3 3h-16c-2.757 0-5-2.243-5-5v-10c0-.868.226-1.711.643-2.452.272-.486.625-.923 1.05-1.298.414-.365 1.046-.327 1.412.088.365.414.326 1.046-.088 1.412-.089.079-.173.162-.251.25.563.627 1.376 1 2.235 1v-4c-.001-2.206 1.793-4 3.999-4h11c2.206 0 4 1.794 4 4zm-17 4h4.5c0-1.657 1.343-3 3-3s3 1.343 3 3h3.5c.352 0 .686.072 1 .184v-4.184c0-1.103-.897-2-2-2h-11c-1.103 0-2 .897-2 2zm15 3c0-.551-.448-1-1-1h-16c-1.096 0-2.146-.363-3-1.003v10.003c0 1.654 1.346 3 3 3h16c.552 0 1-.449 1-1z"})),Ra=a=>t.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},t.createElement("path",{d:"M12 5V19M5 12H19",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Pa=()=>{const[a,s]=t.useState("0"),[i,r]=t.useState(!1),n=t.useRef(null),{updateBalance:l,balance:f}=t.useContext(me),u=async d=>{d&&d.preventDefault();let m=!0;n.current&&(m=await n.current.validate()&&m),m&&a&&!isNaN(parseFloat(a))&&(await l(parseFloat(a)),s(""),r(!1))};return e.jsxs("div",{className:"max-w-3xl mx-auto p-8 border-2 rounded-lg border-card-outline",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary-text mb-8",children:"Payment Management"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary p-3 rounded-full mr-4",children:e.jsx(Ta,{width:24,height:24,className:"fill-primary-text"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-primary-text",children:"Current Balance"}),e.jsx("p",{className:"text-primary-text text-sm",children:"Available funds"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-3xl font-bold text-primary-text",children:f!==void 0?f.toFixed(2):"0.00"})})]}),e.jsxs(G,{filled:!0,onClick:()=>r(!0),className:"w-full py-3 px-4 bg-primary text-white rounded-md flex items-center justify-center hover:bg-filled-button-hover transition-colors",children:[e.jsx(Ra,{width:24,height:24,className:"mr-2 fill-primary-text"}),"Top Up Balance"]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-card-background p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Top Up Balance"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"amount",className:"block text-primary-text mb-2",children:"Amount"}),e.jsx(ee,{type:"number",name:"amount",value:a,onChange:d=>s(d.target.value),placeholder:"Enter amount",inputClassName:"w-full p-3 border rounded-md",required:!0,min:"1",validateFunction:d=>{if(!d||isNaN(d)||parseFloat(d)<=0)throw new Error("Please enter a valid amount greater than 0")}})]}),e.jsxs("div",{className:"flex justify-between gap-4 mt-4",children:[e.jsx(G,{type:"button",onClick:()=>r(!1),className:"flex-1 py-2 px-4 border rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx(G,{filled:!0,type:"submit",className:"flex-1 py-2 px-4 bg-primary text-white rounded-md hover:bg-filled-button-hover",children:"Confirm"})]})]})]})})]})},Da=()=>{const{t:a}=ue(),{language:s,setLanguage:i}=t.useContext(le),[r,n]=t.useState(!0),l=[{label:a("thisLanguage",{lng:"en"}),value:"en"},{label:a("thisLanguage",{lng:"id"}),value:"id"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:a("label.language")}),e.jsx(ee,{name:"language",type:"suggest",selectOnFocus:!0,options:l,onOptionSelect:f=>i(f),forceSuggestions:!0,placeholder:a("placeholder.language"),value:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:a("label.theme")}),e.jsx(Ea,{})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:a("label.appVersion")}),e.jsx("div",{className:"text-gray-500",children:"1.0.0"})]})]})},Ia=()=>{const{t:a}=ue(),{isSmallScreen:s}=t.useContext(le),i=[{id:"general",name:a("settings.general"),component:e.jsx(Da,{})},{id:"profile",name:a("settings.editProfile"),component:e.jsx(Sa,{})},{id:"account",name:a("settings.account"),component:e.jsx(Aa,{})},{id:"payment",name:a("settings.payment"),component:e.jsx(Pa,{})}],r=at(),n=Ee(),[l,f]=t.useState(()=>{const d=window.location.hash.replace("#","");return i.find(h=>h.id.toLowerCase()===d.toLowerCase())||i[0]});t.useEffect(()=>{const d=r.hash.replace("#","");if(d){const m=i.find(h=>h.id.toLowerCase()===d.toLowerCase());m&&m.id!==l.id&&f(m)}},[r.hash,i]);const u=d=>{f(d),n(`#${d.id}`,{replace:!0})};return e.jsxs("div",{style:{marginTop:Be},className:"flex w-screen border-t border-card-outline/50 bg-background text-primary-text",children:[e.jsx("div",{className:"min-w-3xs h-full mb-2 relative border-r border-card-outline/50 bg-card-background",children:i.map(d=>e.jsx("div",{className:`p-4 cursor-pointer border-l-4 transition-colors ${l.id===d.id?"border-card-outline bg-interactive-hover text-primary-text":"border-transparent bg-card-background text-primary-text hover:bg-interactive-hover"}`,onClick:()=>u(d),children:e.jsx("span",{className:"font-medium",children:d.name})},d.id))}),e.jsx("div",{className:"p-6 flex-1 min-w-lg overflow-y-scroll bg-background text-primary-text",children:l==null?void 0:l.component})]})},La="/last-minute/assets/paw-CkOyYJZF.lottie",qa=()=>{const{t:a}=ue(),{isOnline:s}=t.use(le);return e.jsxs("div",{className:"flex flex-col items-center justify-center text-primary-text",children:[e.jsx(Ie,{src:La,loop:!0,autoplay:!0}),e.jsx("p",{children:a(s?"mainLoading.loading":"mainLoading.offline")})]})},vt=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Contact"}),e.jsx(cs,{})]}),Ma=()=>{const{t:a}=ue(),{courses:s}=t.useContext(ye),i=n=>a(`subject.${n}`,{defaultValue:n}),r=s.filter(n=>n.done===!0);return e.jsx("div",{className:"w-screen flex flex-col items-center justify-center",style:{paddingTop:Be},children:e.jsx(pe,{scrolling:!0,header:a("history.header",{defaultValue:"History"}),className:"w-[min(48rem,11/12*100%)] flex max-h-2/3 p-[min(3rem,4%)]",children:e.jsxs("div",{className:"divide-y flex-1 flex-col divide-primary",children:[r.length===0&&e.jsx("div",{className:"py-8 text-center text-lg opacity-70",children:a("history.noHistory",{defaultValue:"No completed courses yet."})}),r.map(n=>e.jsx("div",{className:"flex w-full gap-2 items-center py-2 px-4",children:e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-xl",children:i(n.subject)}),e.jsx("p",{className:"font-semibold",children:n.topic}),e.jsx("p",{className:`${n.details?"":"italic opacity-75"} truncate`,children:n.details||a("history.noDescription",{defaultValue:"No description"})}),e.jsx("p",{children:n.bookingTime?Le(n.bookingTime):a("history.completedAt",{date:Le(n.doneAt)})})]})},n.id))]})})})},Ba=()=>{const{t:a}=ue(),{requests:s,acceptRequest:i}=t.useContext(ye),r=n=>a(`subject.${n}`,{defaultValue:n});return e.jsx("div",{className:"w-screen flex flex-col items-center justify-center",children:e.jsx(pe,{scrolling:!0,header:a("requests.header",{defaultValue:"Requests"}),className:"w-[min(48rem,11/12*100%)] flex max-h-2/3 p-[min(3rem,4%)]",children:e.jsxs("div",{className:"divide-y flex-1 flex-col divide-primary",children:[s.length===0&&e.jsx("div",{className:"py-8 text-center text-lg opacity-70",children:a("requests.noRequests",{defaultValue:"No requests yet."})}),s.map(n=>e.jsxs("div",{className:"flex w-full gap-2 items-center py-2 px-4",children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-xl",children:r(n.subject)}),e.jsx("p",{className:"font-semibold",children:n.topic}),e.jsx("p",{className:`${n.details?"":"italic opacity-75"} truncate`,children:n.details||a("requests.noDescription")}),e.jsx("p",{children:n.bookingTime?Le(n.bookingTime):a("requests.orderedAt",{date:Le(n.createdAt)})})]}),e.jsx(G,{className:"ml-auto",onClick:()=>i(n),children:a("button.accept")})]},n.id))]})})})},Va=()=>e.jsx(nt,{children:e.jsx(os,{})});function Fa(){var r;const{user:a}=t.useContext(me),s=at(),i=t.useRef(null);return e.jsx(de,{mode:"wait",children:a===void 0?e.jsx($.div,{className:"w-screen h-[100svh] flex justify-center items-center text-primary-text",initial:{opacity:0,scale:1.2,transition:{duration:.1}},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8,transition:{duration:.15}},transition:re,children:e.jsx(qa,{})},"loading"):e.jsxs($.div,{className:"w-screen h-screen overflow-hidden flex-col flex text-primary-text",initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:re,children:[e.jsx(Dt,{scrollContainerRef:i}),e.jsx(de,{mode:"wait",children:e.jsx($.div,{variants:{initial:{opacity:0,scale:1.2},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.1}}},transition:re,ref:i,initial:"initial",animate:"animate",exit:"exit",className:"w-full overflow-y-auto h-screen flex",children:e.jsxs(is,{location:s,children:[e.jsx(ge,{path:"/",element:a?e.jsx(nt,{children:e.jsx(ha,{})}):e.jsx(bt,{})}),a?e.jsxs(ge,{element:e.jsx(Va,{}),children:[(r=a.claims)!=null&&r.isTutor?e.jsx(ge,{path:"/requests",element:e.jsx(Ba,{})}):e.jsx(ge,{path:"/booking",element:e.jsx(pa,{})}),e.jsx(ge,{path:"/session",element:e.jsx(ka,{})}),e.jsx(ge,{path:"/history",element:e.jsx(Ma,{})}),e.jsx(ge,{path:"/settings",element:e.jsx(Ia,{})}),e.jsx(ge,{path:"/landing",element:e.jsx(bt,{})}),e.jsx(ge,{path:"/contact",element:e.jsx(vt,{})})]}):e.jsx(e.Fragment,{children:e.jsx(ge,{path:"/contact",element:e.jsx(vt,{})})}),e.jsx(ge,{path:"*",element:e.jsx(la,{})})]},s.pathname)},s.pathname+(a?"-auth":"-guest"))})]},"loaded")})}Ot.createRoot(document.getElementById("root")).render(e.jsx(Tt,{children:e.jsx(Pt,{children:e.jsx(ls,{basename:"/last-minute/",children:e.jsx(Fa,{})})})}));
